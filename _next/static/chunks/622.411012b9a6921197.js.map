{"version":3,"file":"static/chunks/622.411012b9a6921197.js","mappings":"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","sources":["webpack://_N_E/./src/components/OfflineNotice.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { usePWA } from '../hooks/usePWA';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface OfflineNoticeProps {\r\n  position?: 'top' | 'bottom';\r\n  showConnectionSpeed?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst OfflineNotice: React.FC<OfflineNoticeProps> = ({ \r\n  position = 'top',\r\n  showConnectionSpeed = true,\r\n  className = ''\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { isOnline, isStandalone, dataPreloadStatus } = usePWA();\r\n  const [showNotice, setShowNotice] = useState(false);\r\n  const [wasOffline, setWasOffline] = useState(false);\r\n  const [connectionType, setConnectionType] = useState<string>('');\r\n  const [showReconnectedMessage, setShowReconnectedMessage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Update connection info\r\n    if ('connection' in navigator) {\r\n      const connection = (navigator as any).connection;\r\n      setConnectionType(connection?.effectiveType || '');\r\n    }\r\n\r\n    if (!isOnline) {\r\n      setWasOffline(true);\r\n      setShowNotice(true);\r\n      setShowReconnectedMessage(false);\r\n    } else if (wasOffline && isOnline) {\r\n      // User came back online\r\n      setShowNotice(false);\r\n      setShowReconnectedMessage(true);\r\n      \r\n      // Hide reconnected message after 3 seconds\r\n      const timer = setTimeout(() => {\r\n        setShowReconnectedMessage(false);\r\n        setWasOffline(false);\r\n      }, 3000);\r\n      \r\n      return () => clearTimeout(timer);\r\n    } else {\r\n      setShowNotice(false);\r\n    }\r\n    \r\n    // Return empty cleanup function for other code paths\r\n    return () => {};\r\n  }, [isOnline, wasOffline]);\r\n\r\n  const positionClasses = position === 'top' \r\n    ? 'top-0' \r\n    : 'bottom-0';\r\n\r\n  // Show data preloading status for standalone apps\r\n  if (isStandalone && dataPreloadStatus === 'loading') {\r\n    return (\r\n      <div className={`fixed ${positionClasses} left-0 right-0 z-50 ${className}`}>\r\n        <div className=\"bg-blue-600 text-white px-4 py-2 text-center text-sm shadow-lg\">\r\n          <div className=\"flex items-center justify-center space-x-2\">\r\n            <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n            <span>{t('pwa.preloadingData', 'Preparing app for offline use...')}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (showReconnectedMessage) {\r\n    return (\r\n      <div className={`fixed ${positionClasses} left-0 right-0 z-50 ${className}`}>\r\n        <div className=\"bg-green-500 text-white px-4 py-3 text-center text-sm shadow-lg\">\r\n          <div className=\"flex items-center justify-center space-x-2 max-w-md mx-auto\">\r\n            <div className=\"w-4 h-4 relative\">\r\n              <div className=\"absolute inset-0 bg-white rounded-full animate-ping opacity-75\"></div>\r\n              <div className=\"relative w-4 h-4 bg-white rounded-full flex items-center justify-center\">\r\n                <span className=\"text-green-500 text-xs\">‚úì</span>\r\n              </div>\r\n            </div>\r\n            <span className=\"font-medium\">{t('pwa.backOnline', 'Back online!')}</span>\r\n            {showConnectionSpeed && connectionType && (\r\n              <span className=\"text-green-100 text-xs\">({connectionType})</span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!showNotice || isOnline) {\r\n    return null;\r\n  }\r\n\r\n  const hasOfflineData = dataPreloadStatus === 'completed';\r\n\r\n  return (\r\n    <div className={`fixed ${positionClasses} left-0 right-0 z-50 ${className}`}>\r\n      <div className={`${hasOfflineData ? 'bg-orange-500' : 'bg-red-500'} text-white px-4 py-3 text-center text-sm shadow-lg border-b ${hasOfflineData ? 'border-orange-400' : 'border-red-400'}`}>\r\n        <div className=\"flex items-center justify-center space-x-2 max-w-md mx-auto\">\r\n          {/* Offline Icon with Animation */}\r\n          <div className=\"relative\">\r\n            <div className={`w-4 h-4 ${hasOfflineData ? 'bg-orange-200' : 'bg-red-200'} rounded-full animate-pulse`}></div>\r\n            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n              <svg className={`w-3 h-3 ${hasOfflineData ? 'text-orange-600' : 'text-red-600'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex-1\">\r\n            <span className=\"font-medium\">\r\n              {hasOfflineData\r\n                ? t('pwa.offlineWithData', 'You\\'re offline, but restaurants & maps are cached')\r\n                : isStandalone \r\n                  ? t('pwa.offlineStandalone', 'You\\'re offline. Limited functionality available.')\r\n                  : t('pwa.offline', 'You\\'re offline. Some features may be limited.')\r\n              }\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Features Available Offline */}\r\n        {hasOfflineData && (\r\n          <div className=\"flex items-center justify-center space-x-4 text-orange-100 text-xs mt-2\">\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span>üçΩÔ∏è</span>\r\n              <span>{t('pwa.offlineRestaurants', 'Restaurants')}</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span>üó∫Ô∏è</span>\r\n              <span>{t('pwa.offlineMaps', 'Maps')}</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-1\">\r\n              <span>üèùÔ∏è</span>\r\n              <span>{t('pwa.offlineIslands', 'Islands')}</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Retry Connection Button */}\r\n        <div className=\"mt-2\">\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className={`${hasOfflineData ? 'text-orange-100 hover:text-white' : 'text-red-100 hover:text-white'} text-xs underline transition-colors`}\r\n          >\r\n            {t('pwa.retry', 'Retry connection')}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OfflineNotice;"],"names":["position","OfflineNotice","showConnectionSpeed","className","t","useTranslation","isOnline","isStandalone","dataPreloadStatus","usePWA","showNotice","setShowNotice","useState","wasOffline","setWasOffline","connectionType","setConnectionType","showReconnectedMessage","setShowReconnectedMessage","useEffect","navigator","connection","effectiveType","timer","setTimeout","clearTimeout","positionClasses","div","span","hasOfflineData","svg","fill","viewBox","path","fillRule","d","clipRule","button","onClick","window","location","reload"],"sourceRoot":"","ignoreList":[]}