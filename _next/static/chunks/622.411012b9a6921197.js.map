{"version":3,"file":"static/chunks/622.411012b9a6921197.js","mappings":"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","sources":["webpack://_N_E/./src/components/OfflineNotice.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { usePWA } from '../hooks/usePWA';\nimport { useTranslation } from 'react-i18next';\n\ninterface OfflineNoticeProps {\n  position?: 'top' | 'bottom';\n  showConnectionSpeed?: boolean;\n  className?: string;\n}\n\nconst OfflineNotice: React.FC<OfflineNoticeProps> = ({ \n  position = 'top',\n  showConnectionSpeed = true,\n  className = ''\n}) => {\n  const { t } = useTranslation();\n  const { isOnline, isStandalone, dataPreloadStatus } = usePWA();\n  const [showNotice, setShowNotice] = useState(false);\n  const [wasOffline, setWasOffline] = useState(false);\n  const [connectionType, setConnectionType] = useState<string>('');\n  const [showReconnectedMessage, setShowReconnectedMessage] = useState(false);\n\n  useEffect(() => {\n    // Update connection info\n    if ('connection' in navigator) {\n      const connection = (navigator as any).connection;\n      setConnectionType(connection?.effectiveType || '');\n    }\n\n    if (!isOnline) {\n      setWasOffline(true);\n      setShowNotice(true);\n      setShowReconnectedMessage(false);\n    } else if (wasOffline && isOnline) {\n      // User came back online\n      setShowNotice(false);\n      setShowReconnectedMessage(true);\n      \n      // Hide reconnected message after 3 seconds\n      const timer = setTimeout(() => {\n        setShowReconnectedMessage(false);\n        setWasOffline(false);\n      }, 3000);\n      \n      return () => clearTimeout(timer);\n    } else {\n      setShowNotice(false);\n    }\n    \n    // Return empty cleanup function for other code paths\n    return () => {};\n  }, [isOnline, wasOffline]);\n\n  const positionClasses = position === 'top' \n    ? 'top-0' \n    : 'bottom-0';\n\n  // Show data preloading status for standalone apps\n  if (isStandalone && dataPreloadStatus === 'loading') {\n    return (\n      <div className={`fixed ${positionClasses} left-0 right-0 z-50 ${className}`}>\n        <div className=\"bg-blue-600 text-white px-4 py-2 text-center text-sm shadow-lg\">\n          <div className=\"flex items-center justify-center space-x-2\">\n            <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n            <span>{t('pwa.preloadingData', 'Preparing app for offline use...')}</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (showReconnectedMessage) {\n    return (\n      <div className={`fixed ${positionClasses} left-0 right-0 z-50 ${className}`}>\n        <div className=\"bg-green-500 text-white px-4 py-3 text-center text-sm shadow-lg\">\n          <div className=\"flex items-center justify-center space-x-2 max-w-md mx-auto\">\n            <div className=\"w-4 h-4 relative\">\n              <div className=\"absolute inset-0 bg-white rounded-full animate-ping opacity-75\"></div>\n              <div className=\"relative w-4 h-4 bg-white rounded-full flex items-center justify-center\">\n                <span className=\"text-green-500 text-xs\">‚úì</span>\n              </div>\n            </div>\n            <span className=\"font-medium\">{t('pwa.backOnline', 'Back online!')}</span>\n            {showConnectionSpeed && connectionType && (\n              <span className=\"text-green-100 text-xs\">({connectionType})</span>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!showNotice || isOnline) {\n    return null;\n  }\n\n  const hasOfflineData = dataPreloadStatus === 'completed';\n\n  return (\n    <div className={`fixed ${positionClasses} left-0 right-0 z-50 ${className}`}>\n      <div className={`${hasOfflineData ? 'bg-orange-500' : 'bg-red-500'} text-white px-4 py-3 text-center text-sm shadow-lg border-b ${hasOfflineData ? 'border-orange-400' : 'border-red-400'}`}>\n        <div className=\"flex items-center justify-center space-x-2 max-w-md mx-auto\">\n          {/* Offline Icon with Animation */}\n          <div className=\"relative\">\n            <div className={`w-4 h-4 ${hasOfflineData ? 'bg-orange-200' : 'bg-red-200'} rounded-full animate-pulse`}></div>\n            <div className=\"absolute inset-0 flex items-center justify-center\">\n              <svg className={`w-3 h-3 ${hasOfflineData ? 'text-orange-600' : 'text-red-600'}`} fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n          </div>\n          \n          <div className=\"flex-1\">\n            <span className=\"font-medium\">\n              {hasOfflineData\n                ? t('pwa.offlineWithData', 'You\\'re offline, but restaurants & maps are cached')\n                : isStandalone \n                  ? t('pwa.offlineStandalone', 'You\\'re offline. Limited functionality available.')\n                  : t('pwa.offline', 'You\\'re offline. Some features may be limited.')\n              }\n            </span>\n          </div>\n        </div>\n\n        {/* Features Available Offline */}\n        {hasOfflineData && (\n          <div className=\"flex items-center justify-center space-x-4 text-orange-100 text-xs mt-2\">\n            <div className=\"flex items-center space-x-1\">\n              <span>üçΩÔ∏è</span>\n              <span>{t('pwa.offlineRestaurants', 'Restaurants')}</span>\n            </div>\n            <div className=\"flex items-center space-x-1\">\n              <span>üó∫Ô∏è</span>\n              <span>{t('pwa.offlineMaps', 'Maps')}</span>\n            </div>\n            <div className=\"flex items-center space-x-1\">\n              <span>üèùÔ∏è</span>\n              <span>{t('pwa.offlineIslands', 'Islands')}</span>\n            </div>\n          </div>\n        )}\n\n        {/* Retry Connection Button */}\n        <div className=\"mt-2\">\n          <button\n            onClick={() => window.location.reload()}\n            className={`${hasOfflineData ? 'text-orange-100 hover:text-white' : 'text-red-100 hover:text-white'} text-xs underline transition-colors`}\n          >\n            {t('pwa.retry', 'Retry connection')}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default OfflineNotice;"],"names":["position","OfflineNotice","showConnectionSpeed","className","t","useTranslation","isOnline","isStandalone","dataPreloadStatus","usePWA","showNotice","setShowNotice","useState","wasOffline","setWasOffline","connectionType","setConnectionType","showReconnectedMessage","setShowReconnectedMessage","useEffect","navigator","connection","effectiveType","timer","setTimeout","clearTimeout","positionClasses","div","span","hasOfflineData","svg","fill","viewBox","path","fillRule","d","clipRule","button","onClick","window","location","reload"],"sourceRoot":"","ignoreList":[]}