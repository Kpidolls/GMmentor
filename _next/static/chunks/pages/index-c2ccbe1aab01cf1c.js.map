{"version":3,"file":"static/chunks/pages/index-c2ccbe1aab01cf1c.js","mappings":"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","sources":["webpack://_N_E/./src/config/metaDescriptions.ts","webpack://_N_E/./src/components/LazyShow.tsx","webpack://_N_E/./src/components/MainHero.tsx","webpack://_N_E/./src/components/BlogHighlight.tsx","webpack://_N_E/./src/pages/index.tsx","webpack://_N_E/","webpack://_N_E/./src/utils/dateUtils.ts"],"sourcesContent":["/**\r\n * Unique meta descriptions for each page\r\n * SEO best practice: Each page should have a unique, descriptive meta description\r\n * Optimal length: 150-160 characters\r\n */\r\n\r\nexport const metaDescriptions = {\r\n  // Main pages\r\n  home: \"Discover authentic Greek restaurants, curated travel maps, and local guides for Athens, Santorini, Mykonos, and all Greek islands. Plan your perfect Greek adventure.\",\r\n  \r\n  search: \"Search through 200+ curated Greek locations, restaurants, and travel destinations. Find authentic tavernas, hidden beaches, and local experiences across Greece.\",\r\n  \r\n  store: \"Browse travel essentials and gear recommended by experienced Greece travelers. From packing lists to must-have gadgets for island hopping and city exploration.\",\r\n  \r\n  blog: \"Expert travel guides for Greece covering Athens restaurants, island hopping tips, transportation guides, and insider secrets for authentic Greek experiences.\",\r\n  \r\n  insurance: \"Get comprehensive travel insurance for your Greek vacation. Coverage for medical emergencies, trip cancellations, and lost luggage with SafetyWing - starting at $45/month.\",\r\n  \r\n  airalo: \"Stay connected in Greece with Airalo eSIM data plans. No SIM card swap needed - instant activation, affordable rates, €3 off your first purchase with code GOOGLE4204.\",\r\n  \r\n  login: \"Access your Googlementor account to save favorite restaurants, create custom travel itineraries, and manage your Greek travel plans.\",\r\n  \r\n  signup: \"Join Googlementor's community of Greece travelers. Get exclusive access to curated maps, travel tips, and special offers for authentic Greek experiences.\",\r\n  \r\n  terms: \"Terms of Service for Googlementor. Learn about our commitment to authentic Greek travel recommendations, user privacy, and responsible tourism practices.\",\r\n  \r\n  privacyPolicy: \"Privacy Policy for Googlementor. We protect your data while helping you discover authentic Greece. GDPR-compliant, transparent data practices.\",\r\n  \r\n  // Blog posts - English versions\r\n  blogAthensAirportEn: \"Athens Airport (ATH) transfers: Metro, bus, taxi, and private options. Travel times, costs, and insider tips for 2025.\",\r\n  \r\n  blogAthensHopOnEn: \"Athens Hop-On Hop-Off bus guide: Routes, pricing, best stops, and whether it's worth it. Compare operators and find the best deals for 2025.\",\r\n  \r\n  blogAcropolisEn: \"Ultimate Acropolis guide: Skip-the-line tickets, best visiting times, what to see, and historical context. Make the most of Greece's top attraction.\",\r\n  \r\n  blogLuxuryRooftopEn: \"Athens luxury rooftop restaurants guide: Michelin-level dining, Acropolis views, and elegant cocktail lounges. Best high-end rooftops for special occasions.\",\r\n  \r\n  blogPerfectIslandEn: \"Choose the perfect Greek island for your trip: Compare Santorini, Mykonos, Crete, and hidden gems. Match your travel style to the ideal destination.\",\r\n  \r\n  blogHowToUseEn: \"How to use Googlementor's interactive maps: Save locations, plan itineraries, and discover authentic Greek restaurants. Complete tutorial for travelers.\",\r\n  \r\n  blogPlanFunEn: \"Plan unforgettable weekend adventures in Greece using Googlementor's curated maps. Find hidden beaches, authentic tavernas, and local experiences.\",\r\n  \r\n  // Blog posts - Greek versions\r\n  blogAthensAirportEl: \"Πλήρης οδηγός για τις μεταφορές από το Αεροδρόμιο Αθηνών: Μετρό, λεωφορείο, ταξί και ιδιωτικές επιλογές. Χρόνοι διαδρομής, κόστη και συμβουλές.\",\r\n  \r\n  blogAthensHopOnEl: \"Οδηγός για τα λεωφορεία Hop-On Hop-Off στην Αθήνα: Διαδρομές, τιμές, καλύτερες στάσεις. Συγκρίνετε εταιρείες και βρείτε τις καλύτερες προσφορές.\",\r\n  \r\n  blogAcropolisEl: \"Πλήρης οδηγός Ακρόπολης: Εισιτήρια χωρίς αναμονή, καλύτερες ώρες επίσκεψης, τι να δείτε και ιστορικό πλαίσιο. Αξιοποιήστε το κορυφαίο αξιοθέατο της Ελλάδας.\",\r\n  \r\n  blogMeteora: \"Complete Meteora travel guide: Monasteries, hiking trails, best seasons, 2-day itinerary. Practical Q&A for visiting Greece's spiritual rock formations.\",\r\n  \r\n  blogMeteoraEl: \"Πλήρης οδηγός Μετεώρων: Μοναστήρια, μονοπάτια πεζοπορίας, καλύτερες εποχές, 2ήμερο πρόγραμμα. Πρακτικές ερωτήσεις για τους πνευματικούς βράχους της Ελλάδας.\",\r\n  \r\n  blogLuxuryRooftopEl: \"Πολυτελή rooftop εστιατόρια Αθήνας: Fine dining επιπέδου Michelin, θέα Ακρόπολης και κομψά cocktail lounges. Τα καλύτερα high-end rooftops για ειδικές περιστάσεις.\",\r\n  \r\n  blogPerfectIslandEl: \"Επιλέξτε το τέλειο ελληνικό νησί για το ταξίδι σας: Συγκρίνετε Σαντορίνη, Μύκονο, Κρήτη και κρυφά διαμάντια. Βρείτε τον ιδανικό προορισμό.\",\r\n  \r\n  blogHowToUseEl: \"Πώς να χρησιμοποιήσετε τους διαδραστικούς χάρτες του Googlementor: Αποθηκεύστε τοποθεσίες, σχεδιάστε δρομολόγια και ανακαλύψτε αυθεντικά ελληνικά εστιατόρια.\",\r\n  \r\n  blogPlanFunEl: \"Σχεδιάστε αξέχαστες περιπέτειες Σαββατοκύριακου στην Ελλάδα με τους επιμελημένους χάρτες του Googlementor. Βρείτε κρυφές παραλίες και τοπικές εμπειρίες.\",\r\n  \r\n  blogGreece2026En: \"Complete 2026 Greece holiday calendar: Month-by-month guide to public holidays, festivals, transport disruptions, and smart travel planning around Greek celebrations.\",\r\n  \r\n  blogGreece2026El: \"Πλήρες ημερολόγιο αργιών Ελλάδας 2026: Μηνιαίος οδηγός για δημόσιες αργίες, γιορτές, διακοπές μεταφορών και έξυπνο σχεδιασμό ταξιδιού.\",\r\n  \r\n  blogWeatherSwimmingEn: \"Greece weather guide: Swimming season dates, sea temperatures, business hours, and ferry schedules by month. Plan your perfect Greek trip with confidence.\",\r\n  \r\n  blogWeatherSwimmingEl: \"Οδηγός καιρού Ελλάδας: Περίοδοι κολύμβησης, θερμοκρασίες θάλασσας, ωράρια επιχειρήσεων και δρομολόγια πλοίων ανά μήνα. Προγραμματίστε το τέλειο ταξίδι.\",\r\n  \r\n  blogAthensDayTripsEn: \"Best day trip ideas from Athens: Cape Sounion, Aegina, Chalkida, Loutraki. Complete guide with travel times, what to expect, and practical tips.\",\r\n  \r\n  blogAthensDayTripsEl: \"Καλύτερες ημερήσιες εκδρομές από Αθήνα: Σούνιο, Αίγινα, Χαλκίδα, Λουτράκι. Πλήρης οδηγός με χρόνους διαδρομής, τι να περιμένετε και πρακτικές συμβουλές.\",\r\n  \r\n  blogBakeriesBrunchEn: \"Greek bakeries, brunch & coffee culture guide: Discover tiropita, bougatsa, loukoumades, freddo espresso. Find the best neighborhood bakeries and brunch spots across Greece.\",\r\n  \r\n  blogBakeriesBrunchEl: \"Ελληνικές αρτοποιίες, brunch & κουλτούρα καφέ: Ανακαλύψτε τυρόπιτα, μπουγάτσα, λουκουμάδες, freddo espresso. Βρείτε τις καλύτερες αρτοποιίες γειτονιάς σε Αθήνα, Θεσσαλονίκη, Κρήτη.\",\r\n};\r\n\r\n/**\r\n * Generate a unique meta description for blog posts\r\n * Falls back to truncated summary or generated description\r\n */\r\nexport function generateBlogMetaDescription(\r\n  title: string,\r\n  summary?: string,\r\n  content?: string\r\n): string {\r\n  // Use summary if available and under 155 chars\r\n  if (summary && summary.length > 0 && summary.length <= 155) {\r\n    return summary;\r\n  }\r\n  \r\n  // Truncate summary to 152 chars if too long\r\n  if (summary && summary.length > 155) {\r\n    return summary.slice(0, 152).trimEnd() + '...';\r\n  }\r\n  \r\n  // Extract first paragraph from content\r\n  if (content) {\r\n    const firstParagraph = content\r\n      .replace(/^#+\\s+.*/gm, '') // Remove headers\r\n      .replace(/!\\[.*?\\]\\(.*?\\)/g, '') // Remove images\r\n      .replace(/\\[.*?\\]\\(.*?\\)/g, '') // Remove links\r\n      .split('\\n\\n')\r\n      .find(p => p.trim().length > 50);\r\n    \r\n    if (firstParagraph) {\r\n      const cleaned = firstParagraph.trim();\r\n      if (cleaned.length <= 155) {\r\n        return cleaned;\r\n      }\r\n      return cleaned.slice(0, 152).trimEnd() + '...';\r\n    }\r\n  }\r\n  \r\n  // Generate from title as last resort\r\n  return `${title} - Expert guide for travelers exploring Greece. Practical tips, insider recommendations, and authentic experiences from Googlementor.`;\r\n}\r\n","import React, { MutableRefObject, useEffect, useRef, useState } from 'react';\n\nfunction useOnScreen(\n  ref: MutableRefObject<HTMLDivElement | null>,\n  rootMargin = '0px'\n) {\n  const [isIntersecting, setIntersecting] = useState(false);\n\n  useEffect(() => {\n    if (!('IntersectionObserver' in window)) {\n      setIntersecting(true);\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const entry = entries[0];\n        if (entry) {\n          setIntersecting(entry.isIntersecting);\n        }\n      },\n      { rootMargin }\n    );\n  \n    const currentRef = ref.current;\n    if (currentRef) {\n      observer.observe(currentRef);\n    }\n  \n    return () => {\n      if (currentRef) {\n        observer.unobserve(currentRef);\n      }\n    };\n  }, [ref, rootMargin]);\n\n  return isIntersecting;\n}\n\ninterface LazyShowProps {\n  children: React.ReactNode;\n  deferRender?: boolean;\n  rootMargin?: string;\n}\n\nconst LazyShow = ({ children, deferRender = false, rootMargin = '0px' }: LazyShowProps) => {\n  const rootRef = useRef<HTMLDivElement>(null);\n  const onScreen = useOnScreen(rootRef, rootMargin);\n  const [hasShown, setHasShown] = useState(false);\n\n  const parsedRootMargin = Number.parseInt(rootMargin, 10);\n  const placeholderMinHeight = Number.isNaN(parsedRootMargin)\n    ? 180\n    : Math.max(parsedRootMargin, 180);\n\n  useEffect(() => {\n    if (onScreen) {\n      setHasShown(true);\n    }\n  }, [onScreen]);\n\n  useEffect(() => {\n    if (!deferRender || hasShown) {\n      return;\n    }\n\n    const fallbackTimer = window.setTimeout(() => {\n      setHasShown(true);\n    }, 3000);\n\n    return () => {\n      window.clearTimeout(fallbackTimer);\n    };\n  }, [deferRender, hasShown]);\n\n  if (deferRender && !hasShown) {\n    return (\n      <div\n        ref={rootRef}\n        className=\"lazy-div\"\n        style={{ minHeight: `${placeholderMinHeight}px` }}\n        aria-hidden=\"true\"\n      />\n    );\n  }\n\n  return (\n    <div\n      ref={rootRef}\n      className=\"lazy-div\"\n      style={{\n        opacity: hasShown ? 1 : 0,\n        transform: hasShown ? 'translateX(0) translateZ(0)' : 'translateX(-50px) translateZ(0)',\n        transition: 'opacity 0.5s ease-out, transform 0.5s ease-out',\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default LazyShow;\n","'use client';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport config from '../config/index.json';\r\nimport dynamic from 'next/dynamic';\r\nimport municipalitiesData from '../data/municipalities.json';\r\nimport categoriesData from '../data/restaurantCategories.json';\r\n\r\nimport { usePWA } from '../hooks/usePWA';\r\n\r\n// Region matching utilities no longer needed - using coordinate-based distance\r\n\r\nconst MyTicker = dynamic(() => import('../components/Ticker'), { ssr: false });\r\nconst InstallBanner = dynamic(() => import('./InstallBanner'), { ssr: false });\r\nconst OfflineNotice = dynamic(() => import('./OfflineNotice'), { ssr: false });\r\n\r\n// Helper function to align viewport for all steps before results\r\nconst alignViewport = () => {\r\n  if (typeof window === 'undefined') return;\r\n  window.requestAnimationFrame(() => {\r\n    const isMobile = window.matchMedia('(max-width: 767px)').matches;\r\n    const scrollTarget = isMobile ? 150 : 300;\r\n    if (Math.abs(window.scrollY - scrollTarget) > 8) {\r\n      window.scrollTo({ top: scrollTarget, behavior: 'smooth' });\r\n    }\r\n  });\r\n};\r\n\r\ninterface Restaurant {\r\n  name: string;\r\n  url: string;\r\n  address: string;\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\ninterface Municipality {\r\n  name: string;\r\n  name_en?: string;\r\n  lat: number;\r\n  lng: number;\r\n  region: string;\r\n  region_en?: string;\r\n  aliases?: string[];\r\n}\r\n\r\ninterface RestaurantCategory {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n  color: string;\r\n  keywords: string[];\r\n}\r\n\r\ninterface SearchMode {\r\n  type: 'location' | 'municipality' | 'category';\r\n  selectedMunicipality?: Municipality;\r\n  selectedCategory?: RestaurantCategory;\r\n  selectedExperienceType?: ExperienceType;\r\n}\r\n\r\ninterface ExperienceType {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  icon: string;\r\n  color: string;\r\n  categories: RestaurantCategory[] | any[]; // Will hold different types of data\r\n}\r\n\r\nconst MainHero = () => {\r\n  const logDevWarning = (...args: unknown[]) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.warn(...args);\r\n    }\r\n  };\r\n\r\n  // Snackbar state for share feedback (fix ReferenceError)\r\n  const [shareSnackbar, setShareSnackbar] = useState({ open: false, message: '', type: 'info' });\r\n  const { mainHero } = config;\r\n  const { t } = useTranslation();\r\n  \r\n  // PWA Hook\r\n  const { isOnline, isStandalone, dataPreloadStatus, isInstallable, isInstalled, installApp } = usePWA();\r\n\r\n  const categoryDataCacheRef = useRef<Record<string, Restaurant[]>>({});\r\n  const categoryDataUrls: Record<string, string> = {\r\n    'greek-restaurants': '/data/greekRestaurants.json',\r\n    desserts: '/data/dessertsRestaurants.json',\r\n    'coffee-brunch': '/data/coffeeBrunchRestaurants.json',\r\n    italian: '/data/italianRestaurants.json',\r\n    'cheap-eats': '/data/cheapEatsRestaurants.json',\r\n    asian: '/data/asianRestaurants.json',\r\n    'fish-tavernas': '/data/fishTavernasRestaurants.json',\r\n    burgers: '/data/burgersRestaurants.json',\r\n    'luxury-dining': '/data/luxuryDiningRestaurants.json',\r\n    'rooftop-lounges': '/data/rooftopLoungesRestaurants.json',\r\n    vegetarian: '/data/vegetarianRestaurants.json',\r\n    'gyros-souvlaki': '/data/gyrosSouvlakiRestaurants.json',\r\n    mexican: '/data/mexicanRestaurants.json',\r\n    attractions: '/data/mustSeeAttractions.json',\r\n    'family-friendly': '/data/familyFriendly.json',\r\n    'wineries-vineyards': '/data/wineriesVineyards.json',\r\n    'monasteries-churches': '/data/monasteriesChurches.json'\r\n  };\r\n  \r\n  // Helper function to normalize restaurant data and ensure lat/lng are numbers\r\n  const normalizeRestaurantData = (data: any[]): Restaurant[] => {\r\n    if (!data || !Array.isArray(data)) {\r\n      logDevWarning('Invalid data provided to normalizeRestaurantData');\r\n      return [];\r\n    }\r\n\r\n    return data\r\n      .filter(item => {\r\n        if (!item || typeof item !== 'object') return false;\r\n        if (!item.name) return false;\r\n        \r\n        const lat = typeof item.lat === 'string' ? parseFloat(item.lat) : item.lat;\r\n        const lng = typeof item.lng === 'string' ? parseFloat(item.lng) : item.lng;\r\n        \r\n        if (isNaN(lat) || isNaN(lng)) {\r\n          console.warn(`Skipping ${item.name}: invalid coordinates`, { lat: item.lat, lng: item.lng });\r\n          return false;\r\n        }\r\n        \r\n        // Validate Greece coordinate ranges (34°N to 42°N, 19°E to 30°E)\r\n        if (lat < 34 || lat > 42 || lng < 19 || lng > 30) {\r\n          console.warn(`Skipping ${item.name}: coordinates outside Greece`, { lat, lng });\r\n          return false;\r\n        }\r\n        \r\n        return true;\r\n      })\r\n      .map(item => ({\r\n        name: item.name || 'Unknown',\r\n        url: item.url || '',\r\n        address: item.address || '',\r\n        lat: typeof item.lat === 'string' ? parseFloat(item.lat) : item.lat,\r\n        lng: typeof item.lng === 'string' ? parseFloat(item.lng) : item.lng\r\n      }));\r\n  };\r\n\r\n  const loadRestaurantDataByCategory = async (category?: RestaurantCategory): Promise<Restaurant[]> => {\r\n    const categoryId = category?.id || 'greek-restaurants';\r\n    const cached = categoryDataCacheRef.current[categoryId];\r\n    if (cached) return cached;\r\n\r\n    const localStorageKey = `restaurant_data_${categoryId}`;\r\n\r\n    if (typeof window !== 'undefined' && !navigator.onLine && isStandalone) {\r\n      const cachedData = localStorage.getItem(localStorageKey);\r\n      if (cachedData) {\r\n        try {\r\n          const parsed = normalizeRestaurantData(JSON.parse(cachedData));\r\n          categoryDataCacheRef.current[categoryId] = parsed;\r\n          return parsed;\r\n        } catch (e) {\r\n          logDevWarning('Failed to parse cached restaurant data:', e);\r\n        }\r\n      }\r\n      return [];\r\n    }\r\n\r\n    const dataUrl = categoryDataUrls[categoryId] ?? '/data/greekRestaurants.json';\r\n    try {\r\n      const response = await fetch(dataUrl);\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to fetch ${dataUrl}: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      const normalized = normalizeRestaurantData(data);\r\n      categoryDataCacheRef.current[categoryId] = normalized;\r\n\r\n      if (isStandalone && typeof window !== 'undefined') {\r\n        localStorage.setItem(localStorageKey, JSON.stringify(data));\r\n      }\r\n\r\n      return normalized;\r\n    } catch (error) {\r\n      logDevWarning('Failed to load category data:', error);\r\n\r\n      if (typeof window !== 'undefined') {\r\n        const cachedData = localStorage.getItem(localStorageKey);\r\n        if (cachedData) {\r\n          try {\r\n            const parsed = normalizeRestaurantData(JSON.parse(cachedData));\r\n            categoryDataCacheRef.current[categoryId] = parsed;\r\n            return parsed;\r\n          } catch {\r\n            return [];\r\n          }\r\n        }\r\n      }\r\n\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Helper function to get data by experience type\r\n  const getDataByExperienceType = async (experienceType: ExperienceType): Promise<Restaurant[]> => {\r\n    // Prefer explicit categories defined on the experienceType\r\n    if (Array.isArray(experienceType.categories) && experienceType.categories.length > 0) {\r\n      const primary = experienceType.categories[0] as RestaurantCategory | undefined;\r\n      if (primary) return loadRestaurantDataByCategory(primary);\r\n    }\r\n\r\n    // Support both short and long ids: 'wineries' | 'wineries-vineyards', 'monasteries' | 'monasteries-churches'\r\n    const id = experienceType.id || '';\r\n    if (id.includes('family')) return loadRestaurantDataByCategory({ id: 'family-friendly' } as RestaurantCategory);\r\n    if (id.includes('wineries')) return loadRestaurantDataByCategory({ id: 'wineries-vineyards' } as RestaurantCategory);\r\n    if (id.includes('monasteries')) return loadRestaurantDataByCategory({ id: 'monasteries-churches' } as RestaurantCategory);\r\n    if (id.includes('attractions')) return loadRestaurantDataByCategory({ id: 'attractions' } as RestaurantCategory);\r\n\r\n    // Fallback\r\n    return loadRestaurantDataByCategory({ id: 'family-friendly' } as RestaurantCategory);\r\n  };\r\n\r\n  const loadCurrentSourceData = async (): Promise<Restaurant[]> => {\r\n    if (selectedType === 'experience' && selectedExperienceType) {\r\n      return getDataByExperienceType(selectedExperienceType);\r\n    }\r\n\r\n    if (selectedType === 'category' && selectedDisplayCategory) {\r\n      return loadRestaurantDataByCategory(selectedDisplayCategory);\r\n    }\r\n\r\n    return loadRestaurantDataByCategory(undefined);\r\n  };\r\n\r\n  // Updated state management\r\n  const [searchMode, setSearchMode] = useState<SearchMode>({ type: 'location' });\r\n  const [selectedDisplayCategory, setSelectedDisplayCategory] = useState<RestaurantCategory | undefined>(undefined);\r\n  const [selectedExperienceType, setSelectedExperienceType] = useState<ExperienceType | undefined>(undefined);\r\n  const [selectedType, setSelectedType] = useState<'category' | 'experience' | undefined>(undefined);\r\n  const [_userLocation, setUserLocation] = useState<{lat: number, lng: number} | null>(null);\r\n  const [nearestRestaurants, setNearestRestaurants] = useState<Array<{ restaurant: Restaurant; distance: number }> | null>(null);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showRestaurantFinder, setShowRestaurantFinder] = useState(false);\r\n  const [showMunicipalityList, setShowMunicipalityList] = useState(false);\r\n  const [showCategorySelection, setShowCategorySelection] = useState(false);\r\n  const [showLocationOptions, setShowLocationOptions] = useState(true);\r\n  const [municipalitySearchQuery, setMunicipalitySearchQuery] = useState('');\r\n  const [searchRadius, setSearchRadius] = useState(5);\r\n  const [maxResults, setMaxResults] = useState(50);\r\n  const [selectedRestaurants, setSelectedRestaurants] = useState<Set<number>>(new Set());\r\n  const [initialSearchDone, setInitialSearchDone] = useState(false);\r\n  const [showDeferredUi, setShowDeferredUi] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    const enableDeferredUi = () => setShowDeferredUi(true);\r\n    const idleWindow = window as Window & {\r\n      requestIdleCallback?: (callback: () => void, options?: { timeout: number }) => number;\r\n      cancelIdleCallback?: (id: number) => void;\r\n    };\r\n\r\n    if (idleWindow.requestIdleCallback) {\r\n      const idleId = idleWindow.requestIdleCallback(enableDeferredUi, { timeout: 1200 });\r\n      return () => {\r\n        if (idleWindow.cancelIdleCallback) idleWindow.cancelIdleCallback(idleId);\r\n      };\r\n    }\r\n\r\n    const timeoutId = window.setTimeout(enableDeferredUi, 600);\r\n    return () => window.clearTimeout(timeoutId);\r\n  }, []);\r\n  // Restaurant finder functions\r\n  const calculateDistance = (lat1: number, lng1: number, lat2: number, lng2: number): number => {\r\n    const R = 6371; // Earth's radius in km\r\n    const dLat = (lat2 - lat1) * Math.PI / 180;\r\n    const dLng = (lng2 - lng1) * Math.PI / 180;\r\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n      Math.sin(dLng/2) * Math.sin(dLng/2);\r\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n    return R * c;\r\n  };\r\n\r\n  const formatDistance = (distance: number): string => {\r\n    if (distance < 1) {\r\n      return `${Math.round(distance * 1000)}m`;\r\n    }\r\n    return `${distance.toFixed(1)}km`;\r\n  };\r\n\r\n  // Use selectedType to determine which data to use for search\r\n  const findNearestPlaces = async (userLat: number, userLng: number, count: number = 10, category?: RestaurantCategory) => {\r\n    const sourceData = category\r\n      ? await loadRestaurantDataByCategory(category)\r\n      : await loadCurrentSourceData();\r\n    const placesWithDistance = sourceData.map((place) => ({\r\n      restaurant: place,\r\n      distance: calculateDistance(userLat, userLng, place.lat, place.lng)\r\n    }));\r\n    return placesWithDistance\r\n      .sort((a, b) => a.distance - b.distance)\r\n      .slice(0, count);\r\n  };\r\n\r\n  const getUserLocation = (category?: RestaurantCategory) => {\r\n    const effectiveCategory = category || selectedDisplayCategory;\r\n    if (category) {\r\n      setSelectedDisplayCategory(category);\r\n      setSelectedExperienceType(undefined);\r\n      setSelectedType('category');\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    setShowCategorySelection(false);\r\n    setShowMunicipalityList(false);\r\n    setShowLocationOptions(false);\r\n    setShowRestaurantFinder(true);\r\n    setSearchMode({ type: 'location', selectedCategory: effectiveCategory, selectedMunicipality: undefined });\r\n\r\n    // PWA Enhancement: Check if offline and use cached data if available\r\n    if (!isOnline) {\r\n      const cachedLocation = localStorage.getItem('lastKnownLocation');\r\n      if (cachedLocation && dataPreloadStatus === 'completed') {\r\n        try {\r\n          const { lat, lng } = JSON.parse(cachedLocation);\r\n          setUserLocation({ lat, lng });\r\n          findNearestPlaces(lat, lng, 50, effectiveCategory).then((nearest) => {\r\n            setNearestRestaurants(nearest);\r\n            setCurrentIndex(0);\r\n            setLoading(false);\r\n            setError(t('pwa.usingCachedLocation', 'Using your last known location. Results may not be current.'));\r\n          });\r\n          setCurrentIndex(0);\r\n          return;\r\n        } catch (e) {\r\n          logDevWarning('Failed to parse cached location:', e);\r\n        }\r\n      }\r\n      \r\n      setError(t('pwa.offlineLocationError', 'Location services require an internet connection. Please connect and try again.'));\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Gentle scroll for mobile, more pronounced for desktop\r\n    setTimeout(() => {\r\n      const isMobile = window.innerWidth < 768;\r\n      const scrollTarget = isMobile ? 150 : 300;\r\n      window.scrollTo({ top: scrollTarget, behavior: 'smooth' });\r\n    }, 100);\r\n\r\n    if ('geolocation' in navigator) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        async (position) => {\r\n          const { latitude, longitude } = position.coords;\r\n          setUserLocation({ lat: latitude, lng: longitude });\r\n          \r\n          // Use the currently selected experience type for location search\r\n          const nearest = await findNearestPlaces(latitude, longitude, 50, effectiveCategory); // Fetch up to 50 results\r\n          setNearestRestaurants(nearest); // Display all results within 5km\r\n          setCurrentIndex(0);\r\n          setLoading(false);\r\n          \r\n          // PWA Enhancement: Cache location for offline use\r\n          if (isStandalone) {\r\n            localStorage.setItem('lastKnownLocation', JSON.stringify({ lat: latitude, lng: longitude }));\r\n          }\r\n          \r\n          // Only scroll again if results might be off-screen on larger screens\r\n          setTimeout(() => {\r\n            const isMobile = window.innerWidth < 768;\r\n            if (!isMobile) {\r\n              window.scrollTo({ top: 300, behavior: 'smooth' });\r\n            }\r\n          }, 200);\r\n        },\r\n        async (geolocationError) => {\r\n          // PWA Enhancement: Try to use cached location if available\r\n          if (isStandalone) {\r\n            const cachedLocation = localStorage.getItem('lastKnownLocation');\r\n            if (cachedLocation) {\r\n              try {\r\n                const { lat, lng } = JSON.parse(cachedLocation);\r\n                setUserLocation({ lat, lng });\r\n                const nearest = await findNearestPlaces(lat, lng, 50, effectiveCategory);\r\n                setNearestRestaurants(nearest);\r\n                setCurrentIndex(0);\r\n                setLoading(false);\r\n                setError(t('pwa.usingCachedLocation', 'Using your last known location. Results may not be current.'));\r\n                return;\r\n              } catch (e) {\r\n                logDevWarning('Failed to parse cached location:', e);\r\n              }\r\n            }\r\n          }\r\n          \r\n          logDevWarning('Geolocation error:', geolocationError);\r\n          setError(t('restaurantFinder.locationError', 'Unable to get your location. Please enable location services.'));\r\n          setLoading(false);\r\n          // Minimal scroll for error visibility\r\n          setTimeout(() => {\r\n            const isMobile = window.innerWidth < 768;\r\n            const scrollTarget = isMobile ? 100 : 250;\r\n            window.scrollTo({ top: scrollTarget, behavior: 'smooth' });\r\n          }, 200);\r\n        },\r\n        {\r\n          enableHighAccuracy: true,\r\n          timeout: 10000,\r\n          maximumAge: 300000\r\n        }\r\n      );\r\n    } else {\r\n      setError(t('restaurantFinder.geolocationNotSupported', 'Geolocation is not supported by this browser.'));\r\n      setLoading(false);\r\n      // Minimal scroll for error visibility\r\n      setTimeout(() => {\r\n        const isMobile = window.innerWidth < 768;\r\n        const scrollTarget = isMobile ? 100 : 250;\r\n        window.scrollTo({ top: scrollTarget, behavior: 'smooth' });\r\n      }, 200);\r\n    }\r\n  };\r\n\r\n  const searchByMunicipality = async (municipality: Municipality, category?: RestaurantCategory) => {\r\n    const effectiveCategory = category || selectedDisplayCategory;\r\n    if (category) {\r\n      setSelectedDisplayCategory(category);\r\n      setSelectedExperienceType(undefined);\r\n      setSelectedType('category');\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n    setShowCategorySelection(false);\r\n    setShowRestaurantFinder(true);\r\n    setShowMunicipalityList(false);\r\n    setSearchMode({ type: 'municipality', selectedMunicipality: municipality, selectedCategory: effectiveCategory });\r\n\r\n    // Responsive scroll based on screen size\r\n    setTimeout(() => {\r\n      const isMobile = window.innerWidth < 768;\r\n      const scrollTarget = isMobile ? 150 : 300;\r\n      window.scrollTo({ top: scrollTarget, behavior: 'smooth' });\r\n    }, 100);\r\n\r\n    // Get all data for selected category (use explicit value to avoid state timing issues)\r\n    const sourceData = effectiveCategory\r\n      ? await loadRestaurantDataByCategory(effectiveCategory)\r\n      : await loadCurrentSourceData();\r\n    \r\n    // Validate that we have data\r\n    if (!sourceData || sourceData.length === 0) {\r\n      console.warn('No data available for selected category/experience');\r\n      setNearestRestaurants([]);\r\n      setCurrentIndex(0);\r\n      setLoading(false);\r\n      setError(t('restaurantFinder.noDataAvailable', 'No data available for this selection'));\r\n      return;\r\n    }\r\n    \r\n    // Define default search radius based on region type\r\n    const getDefaultSearchRadius = (region: string): number => {\r\n      const regionLower = region.toLowerCase();\r\n      \r\n      // Major city centers - 15km radius\r\n      if (regionLower.includes('κέντρο') || regionLower.includes('center')) {\r\n        return 15;\r\n      }\r\n      \r\n      // Suburbs and surrounding areas - 10km radius\r\n      if (regionLower.includes('προάστια') || regionLower.includes('suburbs') || \r\n          regionLower.includes('ανατολικ') || regionLower.includes('east') ||\r\n          regionLower.includes('δυτικ') || regionLower.includes('west') ||\r\n          regionLower.includes('βόρει') || regionLower.includes('north') ||\r\n          regionLower.includes('νότι') || regionLower.includes('south')) {\r\n        return 10;\r\n      }\r\n      \r\n      // Islands and Crete - 20km radius (larger areas, attractions more spread out)\r\n      if (regionLower.includes('νησ') || regionLower.includes('island') ||\r\n          regionLower.includes('κρήτη') || regionLower.includes('crete') ||\r\n          regionLower.includes('cyclades') || regionLower.includes('κυκλάδ') ||\r\n          regionLower.includes('dodecanese') || regionLower.includes('δωδεκάνησ')) {\r\n        return 20;\r\n      }\r\n      \r\n      // Default radius - 12km\r\n      return 12;\r\n    };\r\n    \r\n    // Use custom radius if set, otherwise use region-based default\r\n    const effectiveRadius = searchRadius > 0 ? searchRadius : getDefaultSearchRadius(municipality.region);\r\n    \r\n    // Filter and validate data before distance calculation\r\n    const validPlaces = sourceData.filter(place => {\r\n      const hasValidLat = place.lat !== undefined && place.lat !== null && \r\n                         typeof place.lat === 'number' && !isNaN(place.lat);\r\n      const hasValidLng = place.lng !== undefined && place.lng !== null && \r\n                         typeof place.lng === 'number' && !isNaN(place.lng);\r\n      \r\n      if (!hasValidLat || !hasValidLng) {\r\n        console.warn('Invalid coordinates for place:', place.name);\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n\r\n    console.log(`Searching in ${municipality.name} (${municipality.region})`);\r\n    console.log(`Radius: ${effectiveRadius}km, Max results: ${maxResults}`);\r\n    console.log(`Valid places: ${validPlaces.length}/${sourceData.length}`);\r\n    \r\n    // Calculate distances for all places\r\n    const allPlacesWithDistance = validPlaces\r\n      .map((place) => ({\r\n        restaurant: place,\r\n        distance: calculateDistance(municipality.lat, municipality.lng, place.lat, place.lng)\r\n      }))\r\n      .sort((a, b) => a.distance - b.distance);\r\n\r\n    // For initial search, use 5km radius. For subsequent searches, use selected radius\r\n    const initialRadius = initialSearchDone ? effectiveRadius : 5;\r\n    \r\n    // Filter by radius\r\n    const placesWithinRadius = allPlacesWithDistance.filter(item => {\r\n      const withinRadius = item.distance <= initialRadius;\r\n      if (withinRadius) {\r\n        console.log(`✓ ${item.restaurant.name} - ${item.distance.toFixed(2)}km`);\r\n      }\r\n      return withinRadius;\r\n    });\r\n\r\n    const limitedPlaces = placesWithinRadius.slice(0, maxResults);\r\n\r\n    console.log(`Found ${placesWithinRadius.length} places within ${initialRadius}km`);\r\n    console.log(`Displaying ${limitedPlaces.length} places (maxResults: ${maxResults})`);\r\n    \r\n    // Store and display limited results within the search radius\r\n    setNearestRestaurants(limitedPlaces);\r\n    setCurrentIndex(0);\r\n    setLoading(false);\r\n    \r\n    // Mark that initial search is complete\r\n    if (!initialSearchDone) {\r\n      setInitialSearchDone(true);\r\n    }\r\n    \r\n    // Show appropriate message if no results found\r\n    if (placesWithinRadius.length === 0) {\r\n      const categoryName = selectedExperienceType?.name || selectedDisplayCategory?.name || 'places';\r\n      setError(\r\n        t('restaurantFinder.noResultsInArea', \r\n          'No {{type}} found within {{radius}}km of {{location}}. Try adjusting the search settings below.', {\r\n            type: categoryName,\r\n            radius: initialRadius,\r\n            location: municipality.name\r\n          }\r\n        )\r\n      );\r\n    }\r\n    \r\n    // PWA Enhancement: Cache the search results for offline use\r\n    if (isStandalone) {\r\n      try {\r\n        localStorage.setItem('lastMunicipalitySearch', JSON.stringify({\r\n          municipality: municipality.name,\r\n          results: limitedPlaces,\r\n          timestamp: Date.now()\r\n        }));\r\n      } catch (e) {\r\n        logDevWarning('Failed to cache municipality search:', e);\r\n      }\r\n    }\r\n    \r\n    // Scroll to results section\r\n    setTimeout(() => {\r\n      const resultsSection = document.getElementById('results-section');\r\n      if (resultsSection) {\r\n        const offset = window.innerWidth < 768 ? 20 : 80;\r\n        const elementPosition = resultsSection.getBoundingClientRect().top;\r\n        const offsetPosition = elementPosition + window.pageYOffset - offset;\r\n        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });\r\n      }\r\n    }, 300);\r\n  };\r\n\r\n  // Removed unused selectCategory\r\n\r\n  // Removed unused showMunicipalitySelection\r\n\r\n  // Removed unused showCategorySelection\r\n\r\n  // Removed unused handleLocationOptions\r\n\r\n  const selectSearchMode = (type: 'location' | 'municipality') => {\r\n    setError(null);\r\n    setNearestRestaurants(null);\r\n    setCurrentIndex(0);\r\n    setShowRestaurantFinder(false);\r\n\r\n    if (type === 'location') {\r\n      setSearchMode({ type: 'location', selectedMunicipality: undefined, selectedCategory: undefined });\r\n      setShowMunicipalityList(false);\r\n      setShowLocationOptions(false);\r\n      setShowCategorySelection(true);\r\n      alignViewport();\r\n      return;\r\n    }\r\n\r\n    setSearchMode({ type: 'municipality', selectedMunicipality: undefined, selectedCategory: undefined });\r\n    setShowCategorySelection(false);\r\n    setShowLocationOptions(false);\r\n    setShowMunicipalityList(true);\r\n    alignViewport();\r\n  };\r\n\r\n  const selectMunicipalityForCategory = (municipality: Municipality) => {\r\n    setError(null);\r\n    setNearestRestaurants(null);\r\n    setCurrentIndex(0);\r\n    setShowRestaurantFinder(false);\r\n    setSearchMode(prev => ({ ...prev, type: 'municipality', selectedMunicipality: municipality }));\r\n    setShowMunicipalityList(false);\r\n    setShowCategorySelection(true);\r\n    alignViewport();\r\n  };\r\n\r\n  const runSearchWithCategory = async (category: RestaurantCategory) => {\r\n    setSelectedDisplayCategory(category);\r\n    setSelectedExperienceType(undefined);\r\n    setSelectedType('category');\r\n    setSearchMode(prev => ({ ...prev, selectedCategory: category }));\r\n\r\n    if (searchMode.type === 'municipality' && searchMode.selectedMunicipality) {\r\n      await searchByMunicipality(searchMode.selectedMunicipality, category);\r\n      return;\r\n    }\r\n\r\n    await getUserLocation(category);\r\n  };\r\n\r\n  const backToCategoryStep = () => {\r\n    setLoading(false);\r\n    setError(null);\r\n    setNearestRestaurants(null);\r\n    setCurrentIndex(0);\r\n    setSelectedRestaurants(new Set());\r\n    setShowRestaurantFinder(false);\r\n    setShowLocationOptions(true);\r\n    setShowMunicipalityList(false);\r\n    setShowCategorySelection(false);\r\n    setSearchMode({ type: 'location' });\r\n    alignViewport();\r\n  };\r\n\r\n  const resetSearch = () => {\r\n    setUserLocation(null);\r\n    setNearestRestaurants(null);\r\n    setCurrentIndex(0);\r\n    setError(null);\r\n    setShowRestaurantFinder(false);\r\n    setShowMunicipalityList(false);\r\n    setShowCategorySelection(false);\r\n    setShowLocationOptions(true);\r\n    setSearchMode({ type: 'location' });\r\n    setSelectedDisplayCategory(undefined);\r\n    setSelectedExperienceType(undefined);\r\n    setSelectedType(undefined);\r\n    setMunicipalitySearchQuery(''); // Clear municipality search\r\n    setSelectedRestaurants(new Set()); // Clear selection\r\n    setSearchRadius(2); // Reset to initial 2km\r\n    setInitialSearchDone(false); // Reset initial search flag\r\n    \r\n    // Optimal scroll to show all 4 main cards completely in viewport\r\n    setTimeout(() => {\r\n      const isMobile = window.innerWidth < 768;\r\n      if (isMobile) {\r\n        // Minimal scroll for mobile\r\n        window.scrollTo({ top: 30, behavior: 'smooth' });\r\n      } else {\r\n        // Desktop: scroll to position that shows the 4 main cards optimally\r\n        window.scrollTo({ top: 280, behavior: 'smooth' });\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  const fullReset = () => {\r\n    setUserLocation(null);\r\n    setNearestRestaurants(null);\r\n    setCurrentIndex(0);\r\n    setError(null);\r\n    setShowRestaurantFinder(false);\r\n    setShowMunicipalityList(false);\r\n    setShowCategorySelection(false);\r\n    setShowLocationOptions(true);\r\n    setSearchMode({ type: 'location' });\r\n    setSelectedDisplayCategory(undefined);\r\n    setSelectedExperienceType(undefined);\r\n    setSelectedType(undefined);\r\n    setMunicipalitySearchQuery(''); // Clear municipality search\r\n    setSelectedRestaurants(new Set()); // Clear selection\r\n    setSearchRadius(2); // Reset to initial 2km\r\n    setInitialSearchDone(false); // Reset initial search flag\r\n    \r\n    // Optimal scroll to show all 4 main cards completely in viewport\r\n    setTimeout(() => {\r\n      const isMobile = window.innerWidth < 768;\r\n      if (isMobile) {\r\n        // Minimal scroll for mobile\r\n        window.scrollTo({ top: 30, behavior: 'smooth' });\r\n      } else {\r\n        // Desktop: scroll to position that shows the 4 main cards optimally\r\n        window.scrollTo({ top: 280, behavior: 'smooth' });\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  // Selection helper functions\r\n  const toggleRestaurantSelection = (index: number) => {\r\n    setSelectedRestaurants(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(index)) {\r\n        newSet.delete(index);\r\n      } else {\r\n        if (newSet.size < 10) {\r\n          newSet.add(index);\r\n        }\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const selectAllVisible = () => {\r\n    if (!nearestRestaurants) return;\r\n    const newSet = new Set<number>();\r\n    const limit = Math.min(10, nearestRestaurants.length);\r\n    for (let i = 0; i < limit; i++) {\r\n      newSet.add(i);\r\n    }\r\n    setSelectedRestaurants(newSet);\r\n  };\r\n\r\n  const clearSelection = () => {\r\n    setSelectedRestaurants(new Set());\r\n  };\r\n\r\n  // Helper: determine whether a category represents dining/restaurant results\r\n  const isDiningCategory = (category?: RestaurantCategory): boolean => {\r\n    if (!category || !Array.isArray(category.keywords)) return false;\r\n    const diningKeywords = new Set(['restaurant', 'restaurants', 'taverna', 'tavernas', 'food', 'fish', 'dessert', 'burger', 'pasta', 'pizza', 'grill', 'seafood', 'vegan', 'vegetarian']);\r\n    return category.keywords.some(k => diningKeywords.has(k.toLowerCase()));\r\n  };\r\n\r\n  // Helper: detect if a translated/display label already contains dining words\r\n  // Normalize Greek accents and case before testing to avoid false negatives\r\n  const labelContainsDiningWord = (label: string | undefined): boolean => {\r\n    if (!label) return false;\r\n\r\n    // Basic normalization: lowercase and remove common Greek diacritics so\r\n    // labels like \"Εστιατόρια\" or \"Εστιατόριο\" match reliably.\r\n    let normalized = label.toLowerCase();\r\n    normalized = normalized\r\n      .replace(/ά/g, 'α')\r\n      .replace(/έ/g, 'ε')\r\n      .replace(/ή/g, 'η')\r\n      .replace(/ί/g, 'ι')\r\n      .replace(/ό/g, 'ο')\r\n      .replace(/ύ/g, 'υ')\r\n      .replace(/ώ/g, 'ω')\r\n      .replace(/ΐ/g, 'ι')\r\n      .replace(/ΰ/g, 'υ')\r\n      .replace(/Ά/g, 'α')\r\n      .replace(/Έ/g, 'ε')\r\n      .replace(/Ή/g, 'η')\r\n      .replace(/Ί/g, 'ι')\r\n      .replace(/Ό/g, 'ο')\r\n      .replace(/Ύ/g, 'υ')\r\n      .replace(/Ώ/g, 'ω');\r\n\r\n    // tokens in english + greek (accent-free)\r\n    const tokens = [\r\n      'restaurants', 'restaurant', 'tavernas', 'taverna',\r\n      'εστιατορια', 'εστιατοριο', 'ταβερνες', 'ταβερνα'\r\n    ];\r\n\r\n    return tokens.some(token => normalized.includes(token));\r\n  };\r\n\r\n  // Helper: get a safe display label for a category — will append 'Restaurants' only when appropriate\r\n  const getSafeCategoryHeading = (category: RestaurantCategory) => {\r\n    const raw = t(`categories.${category.id}`, category.name);\r\n    if (isDiningCategory(category) && !labelContainsDiningWord(raw)) {\r\n      return `${raw} ${t('restaurantFinder.restaurants', 'Restaurants')}`;\r\n    }\r\n    return raw;\r\n  };\r\n\r\n  // Helper: get a safe label for count/places sentences — avoid 'Restaurants places' duplication\r\n  const getSafeCategoryForCount = (category: RestaurantCategory) => {\r\n    const raw = t(`categories.${category.id}`, category.name);\r\n    if (labelContainsDiningWord(raw)) return raw;\r\n    return `${raw} ${t('restaurantFinder.places', 'places')}`;\r\n  };\r\n\r\n  const currentRestaurant = nearestRestaurants?.[currentIndex];\r\n\r\n  // Enhanced search normalization function\r\n  const normalizeSearchText = (text: string): string => {\r\n    if (!text) return '';\r\n    \r\n    let normalized = text.toLowerCase().trim();\r\n    \r\n    // Remove Greek tone marks (accents)\r\n    normalized = normalized\r\n      .replace(/ά/g, 'α')\r\n      .replace(/έ/g, 'ε')\r\n      .replace(/ή/g, 'η')\r\n      .replace(/ί/g, 'ι')\r\n      .replace(/ό/g, 'ο')\r\n      .replace(/ύ/g, 'υ')\r\n      .replace(/ώ/g, 'ω')\r\n      .replace(/ΐ/g, 'ι')\r\n      .replace(/ΰ/g, 'υ');\r\n    \r\n    return normalized;\r\n  };\r\n\r\n  // Enhanced transliteration mapping (Greek to Latin)\r\n  const transliterateGreekToLatin = (text: string): string => {\r\n    const greekToLatin: { [key: string]: string } = {\r\n      'α': 'a', 'β': 'v', 'γ': 'g', 'δ': 'd', 'ε': 'e', 'ζ': 'z', 'η': 'i', 'θ': 'th',\r\n      'ι': 'i', 'κ': 'k', 'λ': 'l', 'μ': 'm', 'ν': 'n', 'ξ': 'x', 'ο': 'o', 'π': 'p',\r\n      'ρ': 'r', 'σ': 's', 'ς': 's', 'τ': 't', 'υ': 'u', 'φ': 'f', 'χ': 'ch', 'ψ': 'ps', 'ω': 'o',\r\n      // Common combinations\r\n      'αυ': 'av', 'ευ': 'ev', 'ου': 'ou', 'αι': 'ai', 'ει': 'ei', 'οι': 'oi', 'υι': 'ui',\r\n      'γγ': 'ng', 'γκ': 'gk', 'γχ': 'nch', 'γξ': 'nx', 'μπ': 'mp', 'ντ': 'nt', 'τσ': 'ts', 'τζ': 'tz'\r\n    };\r\n    \r\n    let result = text.toLowerCase();\r\n    \r\n    // Replace multi-character combinations first\r\n    for (const [greek, latin] of Object.entries(greekToLatin)) {\r\n      if (greek.length > 1) {\r\n        result = result.replace(new RegExp(greek, 'g'), latin);\r\n      }\r\n    }\r\n    \r\n    // Replace single characters\r\n    for (const [greek, latin] of Object.entries(greekToLatin)) {\r\n      if (greek.length === 1) {\r\n        result = result.replace(new RegExp(greek, 'g'), latin);\r\n      }\r\n    }\r\n    \r\n    return result;\r\n  };\r\n\r\n  // Generate alternative spellings for common variations\r\n  const generateAlternativeSpellings = (text: string): string[] => {\r\n    const alternatives: string[] = [text];\r\n    let working = text.toLowerCase();\r\n    \r\n    // Common English transliteration variations\r\n    const variations: { [key: string]: string[] } = {\r\n      'agia': ['agía', 'αγία', 'αγια'],\r\n      'agios': ['agíos', 'άγιος', 'αγιος'], \r\n      'nea': ['néa', 'νέα', 'νεα'],\r\n      'neos': ['néos', 'νέος', 'νεος'],\r\n      'palaio': ['palaiό', 'παλαιό', 'παλαιο'],\r\n      'kala': ['kalá', 'καλά', 'καλα'],\r\n      'mega': ['megá', 'μεγά', 'μεγα'],\r\n      'mikro': ['mikró', 'μικρό', 'μικρο'],\r\n      'ano': ['ánο', 'άνω', 'ανω'],\r\n      'kato': ['káto', 'κάτω', 'κατω']\r\n    };\r\n    \r\n    // Add variations for common prefixes/suffixes\r\n    for (const [english, greekVariations] of Object.entries(variations)) {\r\n      if (working.includes(english)) {\r\n        greekVariations.forEach(variation => {\r\n          alternatives.push(working.replace(english, variation));\r\n        });\r\n      }\r\n      \r\n      greekVariations.forEach(variation => {\r\n        if (working.includes(variation)) {\r\n          alternatives.push(working.replace(variation, english));\r\n        }\r\n      });\r\n    }\r\n    \r\n    return alternatives;\r\n  };\r\n\r\n  // Enhanced search matching function\r\n  const searchMatches = (searchText: string, targetText: string): boolean => {\r\n    if (!searchText || !targetText) return false;\r\n    \r\n    const normalizedSearch = normalizeSearchText(searchText);\r\n    const normalizedTarget = normalizeSearchText(targetText);\r\n    \r\n    // Direct match (Greek or English)\r\n    if (normalizedTarget.includes(normalizedSearch)) return true;\r\n    \r\n    // Transliterate Greek text to Latin and check\r\n    const transliteratedTarget = transliterateGreekToLatin(normalizedTarget);\r\n    const transliteratedSearch = transliterateGreekToLatin(normalizedSearch);\r\n    \r\n    // Check if Latin search matches transliterated Greek\r\n    if (transliteratedTarget.includes(transliteratedSearch)) return true;\r\n    \r\n    // Check if Greek search matches transliterated target\r\n    if (normalizedTarget.includes(transliteratedSearch)) return true;\r\n    \r\n    // Check if transliterated search matches original target\r\n    if (targetText.toLowerCase().includes(transliteratedSearch)) return true;\r\n    \r\n    // Check alternative spellings\r\n    const searchAlternatives = generateAlternativeSpellings(searchText);\r\n    const targetAlternatives = generateAlternativeSpellings(targetText);\r\n    \r\n    for (const searchAlt of searchAlternatives) {\r\n      const normalizedSearchAlt = normalizeSearchText(searchAlt);\r\n      if (normalizedTarget.includes(normalizedSearchAlt)) return true;\r\n      if (transliteratedTarget.includes(normalizedSearchAlt)) return true;\r\n      \r\n      for (const targetAlt of targetAlternatives) {\r\n        const normalizedTargetAlt = normalizeSearchText(targetAlt);\r\n        if (normalizedTargetAlt.includes(normalizedSearchAlt)) return true;\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  };\r\n\r\n  // PWA Enhancement: Get municipalities with offline fallback\r\n  const getMunicipalitiesData = (): Municipality[] => {\r\n    if (typeof window !== 'undefined' && !navigator.onLine && isStandalone) {\r\n      const cachedData = localStorage.getItem('municipalities_data');\r\n      if (cachedData) {\r\n        try {\r\n          return JSON.parse(cachedData);\r\n        } catch (e) {\r\n          logDevWarning('Failed to parse cached municipalities data:', e);\r\n        }\r\n      }\r\n    }\r\n    return municipalitiesData;\r\n  };\r\n\r\n  // Filter municipalities based on enhanced search query\r\n  const filteredMunicipalities = getMunicipalitiesData().filter((municipality: Municipality) => {\r\n    if (!municipalitySearchQuery.trim()) return true;\r\n    \r\n    const query = municipalitySearchQuery.trim();\r\n    \r\n    // Check municipality name (Greek)\r\n    if (searchMatches(query, municipality.name)) return true;\r\n    \r\n    // Check municipality name_en field\r\n    if (municipality.name_en && searchMatches(query, municipality.name_en)) return true;\r\n    \r\n    // Check aliases if they exist\r\n    if (municipality.aliases && Array.isArray(municipality.aliases)) {\r\n      if (municipality.aliases.some(alias => searchMatches(query, alias))) return true;\r\n    }\r\n    \r\n    // Check translated municipality name (English from i18n)\r\n    const translatedName = t(`municipalities.${municipality.name}`, municipality.name_en || municipality.name);\r\n    if (searchMatches(query, translatedName)) return true;\r\n    \r\n    // Check region name (Greek)\r\n    if (searchMatches(query, municipality.region)) return true;\r\n    \r\n    // Check region_en field\r\n    if (municipality.region_en && searchMatches(query, municipality.region_en)) return true;\r\n    \r\n    // Check translated region name (English from i18n)\r\n    const translatedRegion = t(`regions.${municipality.region}`, municipality.region_en || municipality.region);\r\n    if (searchMatches(query, translatedRegion)) return true;\r\n    \r\n    return false;\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {/* Custom Animation Styles */}\r\n      <style jsx>{`\r\n        .animation-delay-2000 {\r\n          animation-delay: 2s;\r\n        }\r\n        .animation-delay-4000 {\r\n          animation-delay: 4s;\r\n        }\r\n        .animation-delay-300 {\r\n          animation-delay: 0.3s;\r\n        }\r\n        .animation-delay-600 {\r\n          animation-delay: 0.6s;\r\n        }\r\n        @keyframes shimmer {\r\n          0% { transform: translateX(-100%); }\r\n          100% { transform: translateX(100%); }\r\n        }\r\n        .group:hover .animate-shimmer {\r\n          animation: shimmer 1s ease-in-out;\r\n        }\r\n        \r\n        /* Ensure no horizontal overflow and clean design */\r\n        * {\r\n          box-sizing: border-box;\r\n        }\r\n        \r\n        /* Hide all unnecessary scrollbars */\r\n        body {\r\n          overflow-x: hidden;\r\n        }\r\n      `}</style>\r\n\r\n      {/* Non-critical PWA UI (deferred for faster LCP) */}\r\n      {showDeferredUi && <OfflineNotice position=\"top\" />}\r\n      {showDeferredUi && <InstallBanner position=\"bottom\" showAfterDelay={4000} />}\r\n      \r\n\r\n\r\n      <main className=\"relative min-h-screen w-full flex items-center justify-center\">\r\n        {/* Professional Background with Enhanced Visual Effects */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-sky-100 via-cyan-50 to-blue-100\">\r\n          {/* Simplified background pattern for faster first paint */}\r\n          <div className=\"absolute inset-0 opacity-30 hidden md:block\">\r\n            <div className=\"absolute top-20 left-20 w-64 h-64 bg-sky-300 rounded-full blur-2xl\" />\r\n          </div>\r\n          \r\n          <picture className=\"absolute inset-0 block w-full h-full\">\r\n            <source\r\n              srcSet=\"/assets/images/cover-480.webp 480w, /assets/images/cover-627.webp 627w\"\r\n              sizes=\"100vw\"\r\n              type=\"image/webp\"\r\n            />\r\n            <img\r\n              src=\"/assets/images/cover-627.webp\"\r\n              alt={t('mainHero.coverAlt', 'Panoramic view of Athens skyline with the Acropolis in the background — travel and dining guide hero image')}\r\n              className=\"w-full h-full object-cover\"\r\n              loading=\"eager\"\r\n              decoding=\"sync\"\r\n              sizes=\"100vw\"\r\n              srcSet=\"/assets/images/cover-480.webp 480w, /assets/images/cover-627.webp 627w\"\r\n              style={{ objectFit: 'cover', objectPosition: 'center', opacity: 0.28 }}\r\n            />\r\n          </picture>\r\n          \r\n          {/* Enhanced gradient overlay with better depth (muted so image is visible) */}\r\n          <div className=\"absolute inset-0 bg-gradient-to-t from-white/35 via-sky-100/40 to-blue-100/35 pointer-events-none\" />\r\n          {/* removed heavy horizontal rail to reveal cover image */}\r\n          <div className=\"absolute inset-0 bg-gradient-to-b from-white/10 via-cyan-100/25 to-blue-200/25 pointer-events-none\" />\r\n        </div>\r\n\r\n\r\n\r\n        {/* Enhanced Location Badge with Animation */}\r\n        <div className=\"absolute top-4 right-4 z-40 xs:top-6 xs:right-6 md:top-6 md:right-8 lg:top-8 lg:right-8\">\r\n          <div className=\"relative group\">\r\n            {/* Glow effect */}\r\n            <div className=\"absolute -inset-1 bg-gradient-to-r from-cyan-300 via-sky-300 to-emerald-300 rounded-full blur opacity-35 group-hover:opacity-60 transition duration-300\" />\r\n            \r\n            <span className=\"relative inline-flex items-center px-3 py-2 xs:px-4 xs:py-2 bg-white/80 backdrop-blur-md text-slate-800 font-semibold rounded-full text-xs xs:text-sm gap-2 hover:bg-white hover:scale-105 transition-all duration-300 border border-cyan-200/70 shadow-lg\">\r\n              <span className=\"text-sm xs:text-base animate-pulse\">🇬🇷</span>\r\n              <span className=\"hidden xs:inline font-medium tracking-wide\">{t('mainHero.athens', 'Athens')}</span>\r\n              <div className=\"w-2 h-2 bg-emerald-500 rounded-full animate-pulse\" />\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Ticker */}\r\n        {showDeferredUi && (\r\n          <div className=\"absolute top-0 left-0 w-full z-30\">\r\n            <MyTicker />\r\n          </div>\r\n        )}\r\n\r\n\r\n\r\n        {/* Professional Hero Content */}\r\n        <section role=\"main\" aria-label={t('aria.homepage', 'Homepage')} className=\"relative z-20 px-3 xs:px-4 sm:px-6 lg:px-8 py-8 sm:py-12 max-w-7xl w-full mx-auto hero-tight flex flex-col justify-center\">\r\n          {/* Lightweight content backdrop */}\r\n          <div className=\"absolute inset-0 -z-10 overflow-hidden\">\r\n            <div className=\"absolute inset-0 bg-gradient-to-b from-white/25 via-sky-100/20 to-blue-100/30\" />\r\n          </div>\r\n          <div className=\"text-center space-y-6 xs:space-y-8 sm:space-y-10 lg:space-y-12 w-full\">\r\n            {/* Enhanced Title with Modern Typography */}\r\n            <header className=\"space-y-4 xs:space-y-5 sm:space-y-7 relative\">\r\n              {/* Decorative elements */}\r\n              <div className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-transparent via-cyan-300 to-transparent rounded-full opacity-70\" />\r\n              \r\n              <div \r\n                onClick={fullReset}\r\n                className=\"font-bold tracking-tight text-slate-900 hover:scale-[1.02] transition-all duration-500 cursor-pointer group relative\"\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') fullReset(); }}\r\n                title={t('mainHero.clickToReturnToMain', 'Click to return to main page')}\r\n              >\r\n                {/* Glow effect behind title */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-cyan-400/15 via-teal-300/20 to-amber-200/20 blur-3xl scale-110 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                \r\n                <div className=\"relative\">\r\n                  <span className=\"block text-sm xs:text-base sm:text-lg lg:text-xl xl:text-2xl text-sky-700 font-semibold mb-3 xs:mb-4 sm:mb-5 tracking-[0.2em] uppercase group-hover:text-cyan-700 transition-all duration-500 relative drop-shadow-sm\">\r\n                    <span className=\"relative z-10\">{t('mainHero.subtitle')}</span>\r\n                    <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-0.5 bg-gradient-to-r from-transparent via-cyan-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                  </span>\r\n                  \r\n                  <h1 className=\"block text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold bg-gradient-to-r from-sky-900 via-blue-700 to-cyan-700 bg-clip-text text-transparent leading-tight px-1 group-hover:from-sky-800 group-hover:via-blue-700 group-hover:to-cyan-600 transition-all duration-500 drop-shadow-lg\">\r\n                    {t('mainHero.title')}\r\n                  </h1>\r\n                  <p className=\"mt-3 text-sm sm:text-base md:text-lg text-slate-700 max-w-2xl mx-auto font-medium\">\r\n                    {t('mainHero.tagline', 'Curated maps, local guides and vetted lists to help you explore Greece with confidence.')}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Decorative dots */}\r\n              <div className=\"flex justify-center space-x-2 mt-6\">\r\n                <div className=\"w-2 h-2 bg-sky-300 rounded-full animate-pulse\" />\r\n                <div className=\"w-2 h-2 bg-cyan-300 rounded-full animate-pulse animation-delay-300\" />\r\n                <div className=\"w-2 h-2 bg-emerald-300 rounded-full animate-pulse animation-delay-600\" />\r\n              </div>\r\n            </header>\r\n\r\n            {/* Professional Discovery Interface */}\r\n            <div className=\"max-w-5xl mx-auto px-1 xs:px-2 sm:px-4 w-full\">\r\n              {showCategorySelection && !showRestaurantFinder && !showMunicipalityList && (\r\n                <div className=\"relative group\">\r\n                  <div className=\"absolute -inset-1 bg-gradient-to-r from-cyan-500/30 via-teal-400/30 to-emerald-400/30 rounded-3xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-700\" />\r\n                  <div className=\"relative bg-white/75 backdrop-blur-2xl rounded-2xl xs:rounded-3xl sm:rounded-[2rem] p-4 xs:p-6 sm:p-8 lg:p-12 border border-white/60 shadow-2xl\">\r\n                    <div className=\"text-center mb-8 xs:mb-10 lg:mb-12 relative\">\r\n                      <div className=\"w-20 h-0.5 bg-gradient-to-r from-transparent via-cyan-300 to-transparent mx-auto mb-6 opacity-70\" />\r\n                      <h2 className=\"text-xl xs:text-2xl sm:text-3xl lg:text-4xl font-bold text-slate-900 mb-4 xs:mb-5 sm:mb-6 relative\">\r\n                        <span className=\"relative z-10\">{t('discovery.chooseCategoryAfterLocation', 'Choose a Category')}</span>\r\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-cyan-400/20 to-emerald-300/20 blur-lg scale-110 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                      </h2>\r\n                      <p className=\"text-slate-700 text-sm xs:text-base sm:text-lg lg:text-xl max-w-3xl mx-auto px-4 leading-relaxed font-light mb-6\">\r\n                        {t('discovery.selectCategoryAfterLocation', 'Select a category to continue with your search.')}\r\n                      </p>\r\n                    </div>\r\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 xs:gap-3 sm:gap-4 mb-4 xs:mb-6 sm:mb-8\">\r\n                      {/* Show all categories in a single grid */}\r\n                      {categoriesData.map((category) => (\r\n                        <button\r\n                          key={'category-' + category.id}\r\n                          onClick={() => {\r\n                            runSearchWithCategory(category);\r\n                          }}\r\n                          className={`group relative overflow-hidden bg-white/70 backdrop-blur-sm hover:bg-white border border-sky-100 rounded-lg xs:rounded-xl sm:rounded-2xl p-4 xs:p-5 sm:p-7 transition-all duration-300 hover:scale-[1.02] hover:shadow-xl${selectedDisplayCategory?.id === category.id && selectedType === 'category' ? ' border-cyan-400 bg-cyan-50' : ''}`}\r\n                        >\r\n                          <div className=\"relative text-center space-y-2 xs:space-y-3 sm:space-y-4\">\r\n                            <div className=\"text-3xl xs:text-4xl sm:text-5xl group-hover:scale-110 transition-transform duration-300\">\r\n                              {category.icon}\r\n                            </div>\r\n                            <h3 className=\"text-slate-800 font-bold text-sm sm:text-base lg:text-lg leading-tight\">\r\n                              {t(`categories.${category.id}`, category.name)}\r\n                            </h3>\r\n                            <p className=\"text-slate-600 text-xs sm:text-sm leading-tight\">\r\n                              {t(`categories.descriptions.${category.id}`, category.description)}\r\n                            </p>\r\n                          </div>\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                    <div className=\"text-center pt-4 border-t border-sky-100\">\r\n                      <button\r\n                        onClick={() => {\r\n                          setShowCategorySelection(false);\r\n                          if (searchMode.type === 'municipality' && searchMode.selectedMunicipality) {\r\n                            setShowMunicipalityList(true);\r\n                          } else {\r\n                            setShowLocationOptions(true);\r\n                          }\r\n                          alignViewport();\r\n                        }}\r\n                        className=\"group inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-all duration-200 font-semibold text-sm sm:text-base px-4 py-2.5 rounded-xl hover:bg-white/70 hover:scale-105\"\r\n                      >\r\n                        <svg className=\"w-4 h-4 group-hover:-translate-x-1 transition-transform duration-200\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 19l-7-7 7-7\" />\r\n                        </svg>\r\n                        {t('categorySelection.backToLocationStep', 'Back to Search Method')}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {showMunicipalityList ? (\r\n              /* Location Selection - User-Friendly Compact Design */\r\n              <div className=\"bg-white/95 backdrop-blur-md rounded-xl sm:rounded-2xl p-4 sm:p-6 border border-white/30 shadow-2xl max-w-4xl mx-auto\">\r\n                \r\n                {/* Compact Header */}\r\n                <div className=\"text-center mb-4\">\r\n                  <h3 className=\"text-lg sm:text-xl font-bold text-gray-800 mb-2 flex items-center justify-center gap-2\">\r\n                    📍 {t('restaurantFinder.chooseMunicipality', 'Choose Your Municipality')}\r\n                  </h3>\r\n                  <p className=\"text-gray-600 text-sm px-2\">\r\n                    {t('locationOptions.selectNeighborhoodFirst', 'Choose your neighborhood first, then pick a category.')}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Search Box with Helper Text */}\r\n                <div className=\"mb-6\">\r\n                  <div className=\"relative max-w-md mx-auto\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                      <svg className=\"h-4 w-4 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={municipalitySearchQuery}\r\n                      onChange={(e) => setMunicipalitySearchQuery(e.target.value)}\r\n                      className=\"block w-full pl-9 pr-10 py-2.5 border border-gray-300 rounded-lg text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200\"\r\n                      placeholder={t('municipalitySearch.placeholder', 'Search locations...')}\r\n                    />\r\n                    {municipalitySearchQuery && (\r\n                      <button\r\n                        onClick={() => setMunicipalitySearchQuery('')}\r\n                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors duration-200\"\r\n                        title={t('municipalitySearch.clearSearch', 'Clear search')}\r\n                        aria-label={t('municipalitySearch.clearSearch', 'Clear search')}\r\n                      >\r\n                        <svg className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                        </svg>\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Helper Text */}\r\n                  <div className=\"text-center mt-2\">\r\n                    {municipalitySearchQuery ? (\r\n                      <span className=\"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full\">\r\n                        {t('municipalitySearch.resultsCount', 'Showing {{count}} of {{total}} locations', {\r\n                          count: filteredMunicipalities.length,\r\n                          total: getMunicipalitiesData().length\r\n                        })}\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        {t('municipalitySearch.typeOrBrowse', 'Type to search or browse below • {{count}} Athens areas', {\r\n                          count: getMunicipalitiesData().length\r\n                        })}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Municipalities List - Clean and Responsive */}\r\n                <div className=\"space-y-4 mb-6\">\r\n                  {filteredMunicipalities.length === 0 ? (\r\n                    <div className=\"text-center py-12\">\r\n                      <div className=\"text-4xl mb-4\">🔍</div>\r\n                      <h4 className=\"text-lg font-semibold text-gray-700 mb-2\">\r\n                        {t('municipalitySearch.noLocationsFoundTitle', 'No locations found')}\r\n                      </h4>\r\n                      <p className=\"text-gray-500 mb-4\">\r\n                        {t('municipalitySearch.noResults', 'No locations found matching your search.')}\r\n                      </p>\r\n                      <button\r\n                        onClick={() => setMunicipalitySearchQuery('')}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200\"\r\n                      >\r\n                        {t('municipalitySearch.clearSearchToSeeAll', 'Clear search to see all locations')}\r\n                      </button>\r\n                    </div>\r\n                  ) : (\r\n                    <>\r\n                      {Object.entries(\r\n                        filteredMunicipalities.reduce((acc: Record<string, Municipality[]>, municipality) => {\r\n                          const region = municipality.region;\r\n                          if (!acc[region]) acc[region] = [];\r\n                          acc[region].push(municipality as Municipality);\r\n                          return acc;\r\n                        }, {})\r\n                      ).map(([region, municipalities]) => (\r\n                        <div key={region} className=\"bg-white rounded-lg p-4 shadow-sm border border-gray-100\">\r\n                          <h4 className=\"text-sm font-bold text-gray-800 mb-3 flex items-center gap-2\">\r\n                            <span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>\r\n                            {t(`regions.${region}`, region)}\r\n                            <span className=\"text-xs text-gray-500 font-normal ml-auto\">\r\n                              {municipalities.length}{' '}\r\n                              {municipalities.length === 1\r\n                                ? t('municipalitySearch.areaSingular', 'area')\r\n                                : t('municipalitySearch.areaPlural', 'areas')}\r\n                            </span>\r\n                          </h4>\r\n                          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2\">\r\n                            {municipalities.map((municipality) => (\r\n                              <button\r\n                                key={municipality.name}\r\n                                onClick={() => {\r\n                                  selectMunicipalityForCategory(municipality);\r\n                                  alignViewport();\r\n                                }}\r\n                                className=\"text-left p-3 rounded-lg hover:bg-blue-50 hover:border-blue-200 border border-gray-200 transition-all duration-200 group\"\r\n                              >\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <span className=\"font-medium text-gray-800 group-hover:text-blue-600 text-sm leading-tight\">\r\n                                    {t(`municipalities.${municipality.name}`, municipality.name)}\r\n                                  </span>\r\n                                  <span className=\"text-blue-400 text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\r\n                                    →\r\n                                  </span>\r\n                                </div>\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"text-center pt-4 border-t border-gray-200\">\r\n                  <button\r\n                    onClick={() => {\r\n                      resetSearch();\r\n                      alignViewport();\r\n                    }}\r\n                    className=\"inline-flex items-center gap-2 text-gray-500 hover:text-gray-700 transition-colors duration-200 font-medium text-sm px-3 py-2 rounded-lg hover:bg-gray-50\"\r\n                  >\r\n                    ← {t('mainHero.backToSearchOptions', 'Back to Search Options')}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : showLocationOptions ? (\r\n              /* Location Options Selection - Enhanced UI */\r\n              <div className=\"relative\">\r\n                {/* Background Glow Effect */}\r\n                <div className=\"absolute -inset-4 bg-gradient-to-r from-sky-300/30 via-blue-300/25 to-cyan-300/25 rounded-3xl blur-3xl opacity-60\" />\r\n                \r\n                <div className=\"relative bg-white/75 backdrop-blur-xl rounded-2xl xs:rounded-3xl sm:rounded-[2rem] p-6 xs:p-8 sm:p-10 lg:p-14 border border-white/60 shadow-2xl\">\r\n                  {/* Header Section */}\r\n                  <div className=\"text-center mb-8 xs:mb-10 lg:mb-14 relative\">\r\n                    <div className=\"w-24 h-1 bg-gradient-to-r from-transparent via-blue-400 to-transparent mx-auto mb-6 opacity-60 rounded-full\" />\r\n                    <h2 className=\"text-xl xs:text-2xl sm:text-3xl lg:text-4xl font-black text-slate-900 mb-4 xs:mb-5 relative\">\r\n                      <span className=\"relative z-10 bg-gradient-to-r from-sky-900 via-blue-700 to-cyan-700 bg-clip-text text-transparent\">\r\n                        {t('locationOptions.chooseLocationMethod', 'Choose Location Method')}\r\n                      </span>\r\n                    </h2>\r\n                    <p className=\"text-slate-700 text-sm xs:text-base sm:text-lg lg:text-xl max-w-2xl mx-auto px-4 leading-relaxed font-light\">\r\n                      {t('locationOptions.selectLocationFirst', 'Start by choosing how to search, then select a category.')}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Options Grid */}\r\n                  <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-5 xs:gap-6 sm:gap-8 lg:gap-10 mb-6 xs:mb-8 max-w-5xl mx-auto\">\r\n                    {/* Near You Option - Enhanced */}\r\n                    <button\r\n                      onClick={() => {\r\n                        selectSearchMode('location');\r\n                      }}\r\n                      className=\"group relative overflow-hidden rounded-2xl xs:rounded-3xl transition-all duration-500 hover:scale-[1.03] active:scale-[0.98]\"\r\n                    >\r\n                      {/* Animated gradient background */}\r\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-sky-100 via-blue-100 to-indigo-100 transition-all duration-500\" />\r\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-sky-50 via-cyan-100 to-blue-100 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                      \r\n                      {/* Shine effect */}\r\n                      <div className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\r\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 via-transparent to-transparent\" />\r\n                      </div>\r\n                      \r\n                      {/* Content */}\r\n                      <div className=\"relative p-6 xs:p-8 sm:p-10 lg:p-12 text-slate-900\">\r\n                        {/* Icon with badge */}\r\n                        <div className=\"flex justify-center mb-6\">\r\n                          <div className=\"relative\">\r\n                            <div className=\"absolute inset-0 bg-sky-300/35 rounded-full blur-2xl scale-150 group-hover:scale-[2] transition-transform duration-500\" />\r\n                            <div className=\"relative bg-white/70 backdrop-blur-sm rounded-full p-4 xs:p-5 sm:p-6 border-2 border-white/70 group-hover:border-white transition-all duration-300 group-hover:rotate-12\">\r\n                              <div className=\"text-4xl xs:text-5xl sm:text-6xl lg:text-7xl group-hover:scale-110 transition-transform duration-300\">\r\n                                📍\r\n                              </div>\r\n                            </div>\r\n                            {/* Pulse effect */}\r\n                            <div className=\"absolute inset-0 bg-sky-300/35 rounded-full animate-ping opacity-0 group-hover:opacity-20\" />\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Badge */}\r\n                        <div className=\"flex justify-center mb-4\">\r\n                          <span className=\"px-4 py-1.5 bg-white/70 backdrop-blur-sm rounded-full text-xs font-semibold tracking-wider uppercase border border-white/80 text-sky-700\">\r\n                            {t('mainHero.fastestBadge', 'Quick')}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {/* Title */}\r\n                        <h3 className=\"text-xl xs:text-2xl sm:text-3xl font-black mb-4 leading-tight\">\r\n                          {t('locationOptions.nearYou', 'Near You')}\r\n                        </h3>\r\n                        \r\n                        {/* Description */}\r\n                        <p className=\"text-slate-700 text-sm xs:text-base sm:text-lg font-medium leading-relaxed mb-6 opacity-90 group-hover:opacity-100 transition-opacity duration-300\">\r\n                          {t('locationOptions.nearYouDesc', 'Use your current location to find nearby places')}\r\n                        </p>\r\n                        \r\n                        {/* Arrow indicator */}\r\n                        <div className=\"flex justify-center\">\r\n                          <div className=\"flex items-center gap-2 text-sm font-semibold group-hover:gap-4 transition-all duration-300\">\r\n                            <span>{t('mainHero.useMyLocation', 'Use my location')}</span>\r\n                            <svg className=\"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\r\n                            </svg>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </button>\r\n\r\n                    {/* By Region Option - Enhanced */}\r\n                    <button\r\n                      onClick={() => {\r\n                        selectSearchMode('municipality');\r\n                      }}\r\n                      className=\"group relative overflow-hidden rounded-2xl xs:rounded-3xl transition-all duration-500 hover:scale-[1.03] active:scale-[0.98]\"\r\n                    >\r\n                      {/* Animated gradient background */}\r\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-emerald-100 via-teal-100 to-cyan-100 transition-all duration-500\" />\r\n                      <div className=\"absolute inset-0 bg-gradient-to-br from-emerald-50 via-teal-100 to-cyan-100 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                      \r\n                      {/* Shine effect */}\r\n                      <div className=\"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500\">\r\n                        <div className=\"absolute inset-0 bg-gradient-to-br from-white/20 via-transparent to-transparent\" />\r\n                      </div>\r\n                      \r\n                      {/* Content */}\r\n                      <div className=\"relative p-6 xs:p-8 sm:p-10 lg:p-12 text-slate-900\">\r\n                        {/* Icon with badge */}\r\n                        <div className=\"flex justify-center mb-6\">\r\n                          <div className=\"relative\">\r\n                            <div className=\"absolute inset-0 bg-emerald-300/35 rounded-full blur-2xl scale-150 group-hover:scale-[2] transition-transform duration-500\" />\r\n                            <div className=\"relative bg-white/70 backdrop-blur-sm rounded-full p-4 xs:p-5 sm:p-6 border-2 border-white/70 group-hover:border-white transition-all duration-300 group-hover:rotate-12\">\r\n                              <div className=\"text-4xl xs:text-5xl sm:text-6xl lg:text-7xl group-hover:scale-110 transition-transform duration-300\">\r\n                                🗺️\r\n                              </div>\r\n                            </div>\r\n                            {/* Pulse effect */}\r\n                            <div className=\"absolute inset-0 bg-emerald-300/35 rounded-full animate-ping opacity-0 group-hover:opacity-20\" />\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* Badge */}\r\n                        <div className=\"flex justify-center mb-4\">\r\n                          <span className=\"px-4 py-1.5 bg-white/70 backdrop-blur-sm rounded-full text-xs font-bold tracking-wider uppercase border border-white/80 text-emerald-700\">\r\n                            {t('mainHero.mostAccurateBadge', 'Most Accurate')}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        {/* Title */}\r\n                        <h3 className=\"text-xl xs:text-2xl sm:text-3xl font-black mb-4 leading-tight\">\r\n                          {t('locationOptions.byNeighborhood', 'Neighborhood')}\r\n                        </h3>\r\n                        \r\n                        {/* Description */}\r\n                        <p className=\"text-slate-700 text-sm xs:text-base sm:text-lg font-medium leading-relaxed mb-6 opacity-90 group-hover:opacity-100 transition-opacity duration-300\">\r\n                          {t('locationOptions.byNeighborhoodDesc', 'Choose a specific neighborhood or municipality')}\r\n                        </p>\r\n                        \r\n                        {/* Arrow indicator */}\r\n                        <div className=\"flex justify-center\">\r\n                          <div className=\"flex items-center gap-2 text-sm font-bold group-hover:gap-4 transition-all duration-300\">\r\n                            <span>{t('mainHero.browseAreas', 'Browse areas')}</span>\r\n                            <svg className=\"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\r\n                            </svg>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </button>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n            {showRestaurantFinder && (\r\n              /* Restaurant Finder Results */\r\n              <div id=\"results-section\" className=\"bg-white/85 backdrop-blur-md rounded-xl sm:rounded-2xl p-4 sm:p-6 lg:p-8 border border-white/60 shadow-2xl max-w-6xl mx-auto\">\r\n                {loading && (\r\n                  <div className=\"text-center py-4 xs:py-6 sm:py-8\">\r\n                    <div className=\"inline-block animate-spin rounded-full h-5 w-5 xs:h-6 xs:w-6 sm:h-8 sm:w-8 border-b-2 border-sky-600 mb-2 xs:mb-3 sm:mb-4\"></div>\r\n                    <p className=\"text-gray-700 text-sm xs:text-base sm:text-lg px-4\">\r\n                      {selectedType === 'experience' && selectedExperienceType\r\n                        ? t('restaurantFinder.loadingMessage', 'Discovering {{category}} near you...', {\r\n                            category: selectedExperienceType.name.toLowerCase()\r\n                          })\r\n                        : selectedDisplayCategory\r\n                        ? t('restaurantFinder.loadingMessage', 'Discovering {{category}} near you...', {\r\n                            category: t(`categories.${selectedDisplayCategory.id}`, selectedDisplayCategory.name).toLowerCase()\r\n                          })\r\n                        : t('restaurantFinder.loadingMessage', 'Discovering places near you...')}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {error && (\r\n                  <div className=\"text-center py-6\">\r\n                    <div className=\"bg-gradient-to-br from-orange-50 to-yellow-50 border-2 border-orange-200 rounded-2xl p-6 sm:p-8\">\r\n                      <div className=\"text-5xl mb-4\">🔍</div>\r\n                      <h3 className=\"text-lg sm:text-xl font-bold text-gray-800 mb-2\">\r\n                        {t('restaurantFinder.noResultsTitle', 'No Results Found')}\r\n                      </h3>\r\n                      <p className=\"text-gray-600 mb-4 text-sm sm:text-base\">{error}</p>\r\n                      \r\n                      {searchMode.type === 'municipality' && searchMode.selectedMunicipality && (\r\n                        <div className=\"bg-white rounded-xl p-4 mb-4 border border-orange-200\">\r\n                          <p className=\"text-sm text-gray-700 mb-3 font-medium\">\r\n                            💡 {t('restaurantFinder.tryThese', 'Try these options:')}\r\n                          </p>\r\n                          <div className=\"space-y-3\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <span className=\"text-2xl\">📏</span>\r\n                              <div className=\"flex-1\">\r\n                                <label className=\"block text-xs font-semibold text-gray-700 mb-2\">\r\n                                  {t('restaurantFinder.expandRadius', 'Expand Search Radius')}: <span className=\"text-blue-600\">{searchRadius}km</span>\r\n                                </label>\r\n                                <input\r\n                                  type=\"range\"\r\n                                  min=\"2\"\r\n                                  max=\"50\"\r\n                                  step=\"1\"\r\n                                  value={searchRadius}\r\n                                  onChange={(e) => setSearchRadius(parseInt(e.target.value))}\r\n                                  className=\"w-full h-2 bg-gradient-to-r from-blue-200 to-blue-400 rounded-lg appearance-none cursor-pointer accent-blue-600\"\r\n                                  aria-label={t('restaurantFinder.searchRadius', 'Search Radius')}\r\n                                  title={`${t('restaurantFinder.searchRadius', 'Search Radius')}: ${searchRadius}km`}\r\n                                />\r\n                                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\r\n                                  <span>2km</span>\r\n                                  <span className=\"font-semibold text-blue-600\">{searchRadius}km</span>\r\n                                  <span>50km</span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center gap-3\">\r\n                              <span className=\"text-2xl\">🔢</span>\r\n                              <div className=\"flex-1\">\r\n                                <label className=\"block text-xs font-semibold text-gray-700 mb-2\">\r\n                                  {t('restaurantFinder.showMore', 'Show More Results')}: <span className=\"text-blue-600\">{maxResults}</span>\r\n                                </label>\r\n                                <input\r\n                                  type=\"range\"\r\n                                  min=\"5\"\r\n                                  max=\"30\"\r\n                                  step=\"5\"\r\n                                  value={maxResults}\r\n                                  onChange={(e) => setMaxResults(parseInt(e.target.value))}\r\n                                  className=\"w-full h-2 bg-gradient-to-r from-green-200 to-green-400 rounded-lg appearance-none cursor-pointer accent-green-600\"\r\n                                  aria-label={t('restaurantFinder.maxResults', 'Max Results')}\r\n                                  title={`${t('restaurantFinder.maxResults', 'Max Results')}: ${maxResults}`}\r\n                                />\r\n                                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\r\n                                  <span>5</span>\r\n                                  <span className=\"font-semibold text-green-600\">{maxResults}</span>\r\n                                  <span>30</span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          <button\r\n                            onClick={() => searchByMunicipality(searchMode.selectedMunicipality!, searchMode.selectedCategory || selectedDisplayCategory)}\r\n                            className=\"mt-4 w-full px-5 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-xl transition-all duration-200 transform hover:scale-[1.02] shadow-lg hover:shadow-xl flex items-center justify-center gap-2\"\r\n                          >\r\n                            <span>🔄</span>\r\n                            {t('restaurantFinder.searchAgain', 'Search Again')}\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"flex flex-col sm:flex-row gap-3 justify-center\">\r\n                        <button\r\n                          onClick={backToCategoryStep}\r\n                          className=\"px-5 py-2.5 bg-white border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200\"\r\n                        >\r\n                          {t('restaurantFinder.chooseAnotherArea', 'Choose Another Area')}\r\n                        </button>\r\n                        {searchMode.type !== 'location' && (\r\n                          <button\r\n                            onClick={() => getUserLocation()}\r\n                            className=\"px-5 py-2.5 bg-gradient-to-r from-green-500 to-green-600 text-white font-medium rounded-lg hover:from-green-600 hover:to-green-700 transition-colors duration-200\"\r\n                          >\r\n                            📍 {t('restaurantFinder.useMyLocation', 'Use My Location')}\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {currentRestaurant && nearestRestaurants && nearestRestaurants.length > 0 && (\r\n                  <div className=\"space-y-3 xs:space-y-4 sm:space-y-6\">\r\n                    \r\n                    <div className=\"text-center mb-6 max-w-3xl mx-auto\">\r\n                      <h3 className=\"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-800 mb-3\">\r\n                        {selectedType === 'experience' && selectedExperienceType ? (\r\n                          <>\r\n                            <span className=\"text-2xl mr-2\">{selectedExperienceType.icon}</span>\r\n                            {selectedExperienceType.name} {t('restaurantFinder.experiences', 'Experiences')}\r\n                          </>\r\n                        ) : selectedType === 'category' && selectedDisplayCategory ? (\r\n                          <>\r\n                            <span className=\"text-2xl mr-2\">{selectedDisplayCategory.icon}</span>\r\n                            {getSafeCategoryHeading(selectedDisplayCategory)}\r\n                          </>\r\n                        ) : searchMode.type === 'municipality' && selectedDisplayCategory ? (\r\n                          <>\r\n                            🎯 {selectedDisplayCategory ? t(`categories.${selectedDisplayCategory.id}`, selectedDisplayCategory.name) : ''} {`${t('restaurantFinder.inArea', 'in')} ${searchMode.selectedMunicipality?.name ? t(`municipalities.${searchMode.selectedMunicipality.name}`, searchMode.selectedMunicipality.name) : ''}`}\r\n                          </>\r\n                        ) : selectedDisplayCategory ? (\r\n                          <>\r\n                            🎯 {selectedDisplayCategory ? t(`categories.${selectedDisplayCategory.id}`, selectedDisplayCategory.name) : ''} {t('restaurantFinder.nearYou', 'Near You')}\r\n                          </>\r\n                        ) : (\r\n                          <>{t('restaurantFinder.nearYou', 'Near You')}</>\r\n                        )}\r\n                      </h3>\r\n                      <p className=\"text-gray-600 text-base sm:text-lg font-medium\">\r\n                        {selectedType === 'experience' && selectedExperienceType\r\n                          ? `${t('restaurantFinder.found', 'Found')} ${nearestRestaurants.length} ${selectedExperienceType.name} ${t('restaurantFinder.places', 'places')}`\r\n                          : selectedType === 'category' && selectedDisplayCategory\r\n                          ? `${t('restaurantFinder.found', 'Found')} ${nearestRestaurants.length} ${getSafeCategoryForCount(selectedDisplayCategory)}`\r\n                          : searchMode.type === 'municipality' && selectedDisplayCategory\r\n                          ? `${t('restaurantFinder.foundCount', 'Found')} ${nearestRestaurants.length} ${selectedDisplayCategory ? t(`categories.${selectedDisplayCategory.id}`, selectedDisplayCategory.name) : ''} ${t('restaurantFinder.placesNear', 'places near')} ${searchMode.selectedMunicipality?.name ? t(`municipalities.${searchMode.selectedMunicipality.name}`, searchMode.selectedMunicipality.name) : ''}`\r\n                          : selectedDisplayCategory\r\n                          ? `${t('restaurantFinder.showingClosest', 'Showing')} ${nearestRestaurants.length} ${t('restaurantFinder.closest', 'closest')} ${selectedDisplayCategory ? t(`categories.${selectedDisplayCategory.id}`, selectedDisplayCategory.name) : ''} ${t('restaurantFinder.places', 'places')}`\r\n                          : `${t('restaurantFinder.showingClosest', 'Showing')} ${nearestRestaurants.length} ${t('restaurantFinder.closest', 'closest')} ${t('restaurantFinder.places', 'places')}`\r\n                        }\r\n                      </p>\r\n                      <p className=\"text-gray-500 text-sm sm:text-base mt-2\">\r\n                        {t('restaurantFinder.sortedByDistance', 'Results are sorted by distance from location selected')}\r\n                      </p>\r\n                      {searchMode.type === 'municipality' && (\r\n                        <span className=\"inline-block mt-2 px-2 sm:px-3 py-1 bg-sky-100 text-sky-700 rounded-full text-xs sm:text-sm font-medium\">\r\n                          📍 {searchMode.selectedMunicipality?.name ? t(`municipalities.${searchMode.selectedMunicipality.name}`, searchMode.selectedMunicipality.name) : ''}{searchMode.selectedMunicipality?.region ? `, ${t(`regions.${searchMode.selectedMunicipality.region}`, searchMode.selectedMunicipality.region)}` : ''}\r\n                        </span>\r\n                      )}\r\n                      {searchMode.type === 'category' && searchMode.selectedCategory && (\r\n                        <span className=\"inline-block mt-2 px-3 py-1 rounded-full text-xs sm:text-sm font-medium bg-gradient-to-r from-white to-sky-50 text-slate-700 border border-sky-100\">\r\n                          {t(`categories.descriptions.${searchMode.selectedCategory.id}`, searchMode.selectedCategory.description)}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Selection and Share Controls */}\r\n                    {(nearestRestaurants && nearestRestaurants.length > 0) && (\r\n                      <>\r\n                        <div className=\"flex flex-col items-center gap-4 mb-6 p-4 bg-gradient-to-r from-sky-50 to-cyan-50 rounded-xl border border-sky-200\">\r\n                          {/* Selection Info */}\r\n                          <div className=\"text-center w-full\">\r\n                            <p className=\"text-sm sm:text-base font-semibold text-gray-700 mb-3\">\r\n                              {selectedRestaurants.size > 0 \r\n                                ? `✓ ${selectedRestaurants.size} ${t('restaurantFinder.selected', 'selected')} ${selectedRestaurants.size < 10 ? `(${t('restaurantFinder.selectUpTo', 'select up to')} ${10 - selectedRestaurants.size} ${t('restaurantFinder.more', 'more')})` : ''}`\r\n                                : `📍 ${t('restaurantFinder.selectUpTo10', 'Select up to 10 locations to share')}`}\r\n                            </p>\r\n                          </div>\r\n\r\n                          {/* Selection Actions */}\r\n                          <div className=\"flex items-center justify-center gap-3 flex-wrap\">\r\n                            <button\r\n                              onClick={selectAllVisible}\r\n                              disabled={selectedRestaurants.size >= 10}\r\n                              className=\"px-4 py-2 text-sm sm:text-base font-semibold text-sky-700 bg-white hover:bg-sky-50 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed border-2 border-sky-200 hover:border-sky-300 shadow-sm\"\r\n                              title={t('restaurantFinder.selectFirst10', 'Select first 10')}\r\n                            >\r\n                              {nearestRestaurants.length >= 10 \r\n                                ? t('restaurantFinder.selectUpTo10', 'Select up to 10')\r\n                                : t('restaurantFinder.selectUpTo', `Select up to ${nearestRestaurants.length}`)}\r\n                            </button>\r\n                            \r\n                            {selectedRestaurants.size > 0 && (\r\n                              <>\r\n                                <button\r\n                                  onClick={clearSelection}\r\n                                  className=\"px-4 py-2 text-sm sm:text-base font-semibold text-gray-700 bg-white hover:bg-gray-50 rounded-lg transition-all duration-200 border-2 border-gray-300 hover:border-gray-400 shadow-sm\"\r\n                                >\r\n                                  {t('restaurantFinder.clearSelection', 'Clear')}\r\n                                </button>\r\n                                \r\n                                <button\r\n                                  onClick={async () => {\r\n                                    const selectedItems = Array.from(selectedRestaurants)\r\n                                      .sort((a, b) => a - b)\r\n                                      .map(index => nearestRestaurants[index])\r\n                                      .filter((item): item is { restaurant: Restaurant; distance: number } => item !== undefined);\r\n                                    \r\n                                    const shareText = selectedItems\r\n                                      .map((r, i) => `${i + 1}. ${r.restaurant.name}\\n${r.restaurant.url}`)\r\n                                      .join('\\n\\n');\r\n                                    const fullText = `${t('restaurantFinder.shareTitle', 'Check out these places:')}\\n\\n${shareText}`;\r\n                                    \r\n                                    let copied = false;\r\n                                    let shared = false;\r\n                                    let message = '';\r\n                                    let type = 'info';\r\n                                    \r\n                                    try {\r\n                                      await navigator.clipboard.writeText(fullText);\r\n                                      copied = true;\r\n                                    } catch (e) {\r\n                                      copied = false;\r\n                                    }\r\n                                    \r\n                                    try {\r\n                                      if (navigator.share) {\r\n                                        await navigator.share({\r\n                                          title: t('restaurantFinder.shareTitle', 'Check out these places!'),\r\n                                          text: fullText\r\n                                        });\r\n                                        shared = true;\r\n                                      }\r\n                                    } catch (e) {\r\n                                      shared = false;\r\n                                    }\r\n                                    \r\n                                    if (copied && shared) {\r\n                                      message = t('restaurantFinder.copiedAndShared', 'Selected locations copied and ready to share!');\r\n                                      type = 'success';\r\n                                    } else if (shared && !copied) {\r\n                                      message = t('restaurantFinder.sharedButNotCopied', 'Shared successfully, but could not copy to clipboard.');\r\n                                      type = 'warning';\r\n                                    } else if (copied && !shared) {\r\n                                      message = t('restaurantFinder.copiedToClipboard', 'Selected locations copied to clipboard!');\r\n                                      type = 'success';\r\n                                    } else {\r\n                                      message = t('restaurantFinder.shareFailed', 'Unable to share or copy results. Please try again.');\r\n                                      type = 'error';\r\n                                    }\r\n                                    \r\n                                    setShareSnackbar({ open: true, message, type });\r\n                                    setTimeout(() => {\r\n                                      setShareSnackbar((prev) => ({ ...prev, open: false }));\r\n                                    }, 5000);\r\n                                  }}\r\n                                  className=\"relative overflow-hidden group inline-flex items-center gap-2 px-6 py-2.5 rounded-lg font-bold text-sm sm:text-base bg-gradient-to-r from-sky-500 via-blue-500 to-cyan-500 hover:from-sky-600 hover:to-cyan-600 text-white shadow-lg border border-sky-300/40 transition-all duration-300 hover:scale-105 active:scale-95\"\r\n                                  title={t('restaurantFinder.shareSelected', 'Share selected locations')}\r\n                                >\r\n                                  <span className=\"absolute inset-0 bg-gradient-to-r from-sky-400 via-blue-500 to-cyan-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\r\n                                  <span className=\"relative flex items-center gap-2\">\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\r\n                                    </svg>\r\n                                    {t('restaurantFinder.shareSelected', `Share (${selectedRestaurants.size})`)}\r\n                                  </span>\r\n                                </button>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Snackbar/Toast for share feedback */}\r\n                        {shareSnackbar.open && (\r\n                          <div\r\n                            className={`fixed z-50 top-6 right-6 min-w-[220px] max-w-xs px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 text-white transition-all duration-300\r\n                              ${shareSnackbar.type === 'success' ? 'bg-green-600' : shareSnackbar.type === 'warning' ? 'bg-yellow-500' : shareSnackbar.type === 'error' ? 'bg-red-600' : 'bg-blue-600'}`}\r\n                            role=\"status\"\r\n                            aria-live=\"polite\"\r\n                          >\r\n                            {shareSnackbar.type === 'success' && <span className=\"text-xl\">✅</span>}\r\n                            {shareSnackbar.type === 'warning' && <span className=\"text-xl\">⚠️</span>}\r\n                            {shareSnackbar.type === 'error' && <span className=\"text-xl\">❌</span>}\r\n                            {shareSnackbar.type === 'info' && <span className=\"text-xl\">ℹ️</span>}\r\n                            <span className=\"flex-1 text-sm font-medium\">{shareSnackbar.message}</span>\r\n                            <button\r\n                              onClick={() => setShareSnackbar({ ...shareSnackbar, open: false })}\r\n                              className=\"ml-2 text-white/80 hover:text-white text-lg font-bold focus:outline-none\"\r\n                              aria-label={t('aria.closeNotification', 'Close notification')}\r\n                            >\r\n                              ×\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                    {/* Vertical Scrollable Restaurant Cards */}\r\n                    <div className=\"relative max-w-4xl mx-auto\">\r\n                      <div className=\"rounded-2xl border border-sky-100/80 bg-white/80 backdrop-blur-sm shadow-lg\">\r\n                        <div className=\"max-h-[240vh] md:max-h-[1200px] overflow-y-auto px-3 sm:px-4 py-3 space-y-3 sm:space-y-4 custom-scrollbar\">\r\n                        {nearestRestaurants.map((restaurantData, index) => {\r\n                          const vegetarianData = categoryDataCacheRef.current['vegetarian'] || [];\r\n                          const luxuryDiningData = categoryDataCacheRef.current['luxury-dining'] || [];\r\n                          const isVegan = vegetarianData.some((v) => v.name === restaurantData.restaurant.name && v.address === restaurantData.restaurant.address);\r\n                          const isLuxury = luxuryDiningData.some((l) => l.name === restaurantData.restaurant.name && l.address === restaurantData.restaurant.address);\r\n                          const isSelected = selectedRestaurants.has(index);\r\n                          return (\r\n                            <div\r\n                              key={index}\r\n                              className={`relative w-full bg-gradient-to-br from-white via-sky-50/40 to-cyan-50/50 rounded-2xl p-4 sm:p-5 border transition-all duration-300 flex flex-col shadow-md hover:shadow-xl ${\r\n                                isSelected\r\n                                  ? 'border-emerald-500 ring-2 ring-emerald-200'\r\n                                  : 'border-slate-200 hover:border-sky-300'\r\n                              }`}\r\n                            >\r\n                              <div className=\"absolute inset-y-3 left-0 w-1.5 rounded-r-full bg-gradient-to-b from-sky-400 via-cyan-500 to-teal-500 opacity-70\" />\r\n                              <div className=\"flex items-start gap-4 pl-3\">\r\n                                <div className=\"flex-1 space-y-3\">\r\n                                  <div className=\"flex items-start gap-2\">\r\n                                    <h4 className=\"font-semibold text-slate-900 text-lg sm:text-xl flex items-start gap-2 line-clamp-2 leading-tight\">\r\n                                      🍽️ <span className=\"flex-1\">{restaurantData.restaurant.name}</span>\r\n                                    </h4>\r\n                                  </div>\r\n                                  <div>\r\n                                    <p className=\"text-slate-600 text-sm sm:text-[15px] flex items-start gap-2 line-clamp-2 leading-snug\">\r\n                                      📍 <span className=\"flex-1\">{restaurantData.restaurant.address}</span>\r\n                                    </p>\r\n                                  </div>\r\n                                  <div className=\"flex flex-wrap items-center gap-2 pt-1\">\r\n                                    <span className=\"bg-gradient-to-r from-sky-600 to-cyan-600 text-white px-3 py-1.5 rounded-full text-sm font-semibold whitespace-nowrap shadow-sm\">\r\n                                      📏 {formatDistance(restaurantData.distance)}\r\n                                    </span>\r\n                                    {isVegan && (\r\n                                      <span title={t('restaurantFinder.badges.veganTitle', 'Vegan Friendly')} className=\"bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full text-xs font-semibold border border-emerald-200\">🌿 {t('restaurantFinder.badges.veganLabel', 'Vegan')}</span>\r\n                                    )}\r\n                                    {isLuxury && (\r\n                                      <span title={t('restaurantFinder.badges.luxuryTitle', 'Luxury/Pricey')} className=\"bg-amber-100 text-amber-700 px-2 py-1 rounded-full text-xs font-semibold border border-amber-200\">✨ {t('restaurantFinder.badges.luxuryLabel', 'Luxury')}</span>\r\n                                    )}\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex flex-col items-end gap-2\">\r\n                                  <label className=\"flex items-center gap-2 cursor-pointer group\">\r\n                                    <input\r\n                                      type=\"checkbox\"\r\n                                      checked={isSelected}\r\n                                      onChange={() => toggleRestaurantSelection(index)}\r\n                                      disabled={!isSelected && selectedRestaurants.size >= 10}\r\n                                      className=\"w-5 h-5 rounded-md border-2 border-slate-400 text-emerald-600 focus:ring-2 focus:ring-emerald-500 cursor-pointer disabled:opacity-30 disabled:cursor-not-allowed transition-all\"\r\n                                    />\r\n                                    <span className=\"text-sm font-semibold text-slate-700 group-hover:text-slate-900\">\r\n                                      {isSelected ? t('restaurantFinder.selected', 'Selected') : t('restaurantFinder.select', 'Select')}\r\n                                    </span>\r\n                                  </label>\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"mt-4\">\r\n                                <a\r\n                                  href={restaurantData.restaurant.url}\r\n                                  target=\"_blank\"\r\n                                  rel=\"noopener noreferrer\"\r\n                                  className=\"block w-full bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white py-3 px-4 rounded-xl font-semibold shadow-md hover:shadow-lg transition-all duration-200 text-center text-base transform hover:scale-[1.01] active:scale-95\"\r\n                                >\r\n                                  {t('restaurantFinder.viewOnMaps', 'View on Google Maps')}\r\n                                </a>\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-center pt-6 mt-6 border-t-2 border-sky-100\">\r\n                      <button\r\n                        onClick={backToCategoryStep}\r\n                        className=\"inline-flex items-center gap-2 px-6 py-3 text-slate-700 hover:text-sky-700 hover:bg-sky-50 rounded-xl transition-all duration-200 font-semibold text-base border-2 border-slate-300 hover:border-sky-300 shadow-sm hover:shadow-md\"\r\n                      >\r\n                        🔄 {t('restaurantFinder.searchAgain', 'Search Again')}\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Search Settings Panel */}\r\n                    <div className=\"mt-6 p-4 bg-gradient-to-br from-sky-50 to-cyan-50 rounded-xl border-2 border-sky-200 shadow-sm max-w-2xl mx-auto\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-lg\">📏</span>\r\n                          <h4 className=\"text-sm font-bold text-slate-800\">\r\n                            {t('restaurantFinder.adjustSearchSettings', 'Adjust Search Settings')}\r\n                          </h4>\r\n                        </div>\r\n                        {nearestRestaurants.length > 0 && (\r\n                          <span className=\"text-xs font-medium text-sky-700 bg-sky-100 px-2 py-1 rounded-full\">\r\n                            {nearestRestaurants.length} {t('restaurantFinder.found', 'found')}\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      \r\n                      <p className=\"text-xs text-slate-600 mb-3\">\r\n                        {t('restaurantFinder.currentSearchRadius', `Current search radius`)}: <span className=\"font-semibold text-sky-700\">{searchRadius}km</span>\r\n                      </p>\r\n\r\n                      <div className=\"space-y-3\">\r\n                        <div>\r\n                          <div className=\"flex items-center justify-between mb-2\">\r\n                            <label className=\"block text-xs font-semibold text-slate-700\">\r\n                              {t('restaurantFinder.searchRadius', 'Search Radius')}\r\n                            </label>\r\n                            <span className=\"text-sm font-bold text-sky-700\">{searchRadius}km</span>\r\n                          </div>\r\n                          <input\r\n                            type=\"range\"\r\n                            min=\"2\"\r\n                            max=\"50\"\r\n                            step=\"1\"\r\n                            value={searchRadius}\r\n                            onChange={(e) => setSearchRadius(parseInt(e.target.value))}\r\n                            className=\"w-full h-2 bg-gradient-to-r from-sky-200 to-cyan-400 rounded-lg appearance-none cursor-pointer accent-sky-600\"\r\n                            aria-label={t('restaurantFinder.searchRadius', 'Search Radius')}\r\n                            title={`${t('restaurantFinder.searchRadius', 'Search Radius')}: ${searchRadius}km`}\r\n                          />\r\n                          <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\r\n                            <span>2km</span>\r\n                            <span className=\"font-semibold text-sky-700\">{searchRadius}km</span>\r\n                            <span>50km</span>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <button\r\n                          onClick={() => searchByMunicipality(searchMode.selectedMunicipality!, searchMode.selectedCategory || selectedDisplayCategory)}\r\n                          className=\"w-full px-4 py-2.5 bg-gradient-to-r from-sky-500 to-cyan-600 hover:from-sky-600 hover:to-cyan-700 text-white font-semibold rounded-lg transition-all duration-200 transform hover:scale-[1.02] shadow-md hover:shadow-lg flex items-center justify-center gap-2\"\r\n                        >\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                          </svg>\r\n                          {t('restaurantFinder.updateResults', 'Update Results')}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n            {/* Enhanced Install App CTA with Modern Design */}\r\n            {(isInstallable || process.env.NODE_ENV === 'development') && !isInstalled && (\r\n              <div className=\"flex justify-center max-w-sm xs:max-w-md sm:max-w-lg mx-auto mt-6 xs:mt-8 sm:mt-10 lg:mt-14 px-4 xs:px-5\">\r\n                <div className=\"relative group w-full\">\r\n                  {/* Glow effect */}\r\n                  <div className=\"absolute -inset-2 bg-gradient-to-r from-emerald-500 via-teal-500 to-cyan-500 rounded-2xl sm:rounded-3xl blur opacity-30 group-hover:opacity-60 transition duration-500\" />\r\n                  \r\n                  <button\r\n                    onClick={async () => {\r\n                      try {\r\n                        const installed = await installApp();\r\n                        if (!installed && process.env.NODE_ENV === 'development') {\r\n                          alert(t('pwa.devInstallPromptLong', 'PWA Install Button Test: In production, this would trigger the install prompt. The PWA must be served over HTTPS with a valid manifest for the install prompt to appear.'));\r\n                        }\r\n                      } catch (error) {\r\n                        logDevWarning('Failed to install app:', error);\r\n                      }\r\n                    }}\r\n                    className=\"relative w-full overflow-hidden bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 hover:from-emerald-500 hover:to-cyan-500 text-white border-2 border-emerald-400/40 px-4 py-3 xs:px-5 xs:py-4 sm:px-7 sm:py-5 lg:px-9 lg:py-6 rounded-xl sm:rounded-2xl lg:rounded-3xl font-bold text-sm xs:text-base sm:text-lg lg:text-xl transition-all duration-500 hover:scale-[1.02] active:scale-95 shadow-2xl\"\r\n                  >\r\n                    {/* Animated background overlay */}\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                    \r\n                    {/* Shimmer effect */}\r\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000\" />\r\n                    \r\n                    {/* Button content */}\r\n                    <div className=\"relative flex items-center justify-center gap-2 xs:gap-3 sm:gap-4\">\r\n                      {/* Install icon with animation */}\r\n                      <div className=\"group-hover:scale-110 transition-transform duration-300\">\r\n                        <svg \r\n                          className=\"w-4 h-4 xs:w-5 xs:h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 drop-shadow-lg\" \r\n                          fill=\"currentColor\" \r\n                          viewBox=\"0 0 20 20\"\r\n                        >\r\n                          <path fillRule=\"evenodd\" d=\"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\r\n                        </svg>\r\n                      </div>\r\n                      \r\n                      {/* Main text */}\r\n                      <span className=\"font-black tracking-wide drop-shadow-lg\">\r\n                        {t('pwa.install', 'Install App')}\r\n                      </span>\r\n                      \r\n                      {/* Benefits badge */}\r\n                      <div className=\"hidden sm:flex items-center px-3 py-1.5 bg-white/20 backdrop-blur-sm rounded-full border border-white/30\">\r\n                        <span className=\"text-xs lg:text-sm font-bold\">\r\n                          {t('pwa.benefit1', 'Works offline')}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      {/* Mobile benefits icon */}\r\n                      <div className=\"sm:hidden flex items-center justify-center w-6 h-6 bg-white/20 backdrop-blur-sm rounded-full border border-white/30\">\r\n                        <span className=\"text-xs\">📱</span>\r\n                      </div>\r\n                    </div>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Enhanced Professional CTA Button */}\r\n            <div className=\"flex justify-center max-w-md mx-auto mt-10 sm:mt-16 px-4\">\r\n              <div className=\"relative group w-full\">\r\n                {/* Subtle glow effect */}\r\n                <div className=\"absolute -inset-1 bg-gradient-to-r from-sky-300/25 via-cyan-300/25 to-blue-300/25 rounded-2xl sm:rounded-3xl blur opacity-30 group-hover:opacity-70 transition duration-500\" />\r\n                \r\n                <a\r\n                  href={mainHero.secondaryAction.href}\r\n                  className=\"relative group overflow-hidden bg-white/80 backdrop-blur-md text-slate-800 border-2 border-white/70 px-7 sm:px-9 py-4 sm:py-5 rounded-xl sm:rounded-2xl font-bold text-base sm:text-lg lg:text-xl hover:bg-white hover:border-sky-200 transition-all duration-500 hover:scale-[1.02] w-full block text-center shadow-xl\"\r\n                >\r\n                  {/* Animated background overlay */}\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-sky-100/50 via-cyan-100/50 to-blue-100/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500\" />\r\n                  \r\n                  {/* Shimmer effect */}\r\n                  <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000\" />\r\n                  \r\n                  <span className=\"relative font-black tracking-wide text-sky-800\">\r\n                    {t('mainHero.secondaryAction.text')}\r\n                  </span>\r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Elegant scroll indicator */}\r\n            {/* <div className=\"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white/60 animate-bounce\">\r\n              <div className=\"flex flex-col items-center space-y-1\">\r\n                <div className=\"w-6 h-10 border-2 border-white/40 rounded-full flex justify-center\">\r\n                  <div className=\"w-1 h-3 bg-white/60 rounded-full mt-2 animate-pulse\"></div>\r\n                </div>\r\n                <span className=\"text-xs uppercase tracking-wide\">{t('mainHero.scrollHint', 'Scroll')}</span>\r\n              </div>\r\n            </div> */}\r\n          </div>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MainHero;\r\n","import React from 'react'\r\nimport Link from 'next/link'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { formatPostDate } from '../utils/dateUtils'\r\n\r\ntype MinimalPost = {\r\n  slug: string\r\n  title: string\r\n  date: string\r\n  summary?: string\r\n  language: string\r\n  originalSlug?: string\r\n}\r\n\r\ntype Props = { allPosts: MinimalPost[] }\r\n\r\nexport default function BlogHighlight({ allPosts }: Props) {\r\n  const { t, i18n } = useTranslation()\r\n  const resolvedLanguage = (i18n.resolvedLanguage || i18n.language || 'en').split('-')[0] || 'en'\r\n\r\n  // Deduplicate by originalSlug, preferring current language then English\r\n  const deduped = Object.values(\r\n    (allPosts || []).reduce<Record<string, MinimalPost>>((acc, post) => {\r\n      const key = post.originalSlug || post.slug\r\n      const existing = acc[key]\r\n      \r\n      // Keep post if:\r\n      // 1. First encounter, OR\r\n      // 2. Current language matches, OR\r\n      // 3. No existing match and this is English (fallback)\r\n      if (!existing ||\r\n          post.language === resolvedLanguage ||\r\n          (existing.language !== resolvedLanguage && post.language === 'en')) {\r\n        acc[key] = post\r\n      }\r\n      return acc\r\n    }, {})\r\n  )\r\n\r\n  // Sort by date desc and take top 3\r\n  const featured = deduped\r\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n    .slice(0, 3)\r\n\r\n  return (\r\n    <section id=\"blog-highlight\" className=\"relative z-10 py-12 bg-white pointer-events-auto\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"text-center mb-8\">\r\n          <h2 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 mb-2\">\r\n            {t('navigation.blog')}\r\n          </h2>\r\n          <p className=\"text-gray-600 max-w-2xl mx-auto\">\r\n            {t('meta.blogDescriptionShort')}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid gap-6 md:grid-cols-3\">\r\n          {featured.map((post) => {\r\n            const href = post.originalSlug || post.slug\r\n            return (\r\n              <Link \r\n                key={href} \r\n                href={`/blog/${href}`} \r\n                className=\"block h-full group no-underline focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-2xl\"\r\n              >\r\n                {/* Semantic article with proper styling and hover effects */}\r\n                <article \r\n                  className=\"bg-white border border-gray-100 rounded-2xl shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-200 p-6 flex flex-col h-full cursor-pointer hover:border-blue-200\"\r\n                  role=\"article\"\r\n                >\r\n                  <div className=\"flex-1\">\r\n                    {/* Clickable title */}\r\n                    <h3 className=\"text-xl font-semibold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors duration-200\">\r\n                      {post.title}\r\n                    </h3>\r\n                    {/* Clickable summary */}\r\n                    <p className=\"text-sm text-gray-600 mb-4 line-clamp-3 group-hover:text-gray-700 transition-colors duration-200\">\r\n                      {post.summary}\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"mt-4 flex items-center justify-between\">\r\n                    <time dateTime={post.date} className=\"text-xs text-gray-500\">\r\n                      {formatPostDate(post.date, resolvedLanguage, { year: 'numeric', month: 'short', day: 'numeric' })}\r\n                    </time>\r\n                    <span className=\"inline-flex items-center gap-1 text-sm font-semibold text-blue-600 group-hover:text-blue-800 transition-colors duration-200\">\r\n                      {t('blog.readMore', 'Read more')}\r\n                      <span className=\"group-hover:translate-x-1 transition-transform duration-200\">→</span>\r\n                    </span>\r\n                  </div>\r\n                </article>\r\n              </Link>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        <div className=\"text-center mt-8\">\r\n          <Link \r\n            href=\"/blog\" \r\n            className=\"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg font-medium shadow hover:bg-blue-700 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\r\n          >\r\n            {t('blog.viewAll', 'View all articles')}\r\n            <span className=\"inline-block ml-2 group-hover:translate-x-1 transition-transform duration-200\">→</span>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n","// import Link from 'next/link';\nimport React from 'react';\nimport LazyShow from '../components/LazyShow';\nimport MainHero from '../components/MainHero';\nimport '../i18n';\nimport Head from 'next/head';\nimport { useTranslation } from 'react-i18next';\nimport { metaDescriptions } from '../config/metaDescriptions';\nimport dynamic from 'next/dynamic';\nimport { GetStaticProps } from 'next';\nimport { Post, getAllPosts } from '../lib/posts';\nimport BlogHighlight from '../components/BlogHighlight';\n// FeaturedCarousel removed — using static blog highlight only\n\nconst AboutUs = dynamic(() => import('../components/AboutUs'));\nconst Canvas = dynamic(() => import('../components/Canvas'));\nconst Product = dynamic(() => import('../components/Product'));\nconst QASection = dynamic(() => import('../components/QASection'));\nconst IslandList = dynamic(() => import('../components/IslandList'));\nconst ProductShowcase = dynamic(() => import('../components/ProductShowcase'));\nconst Reviews = dynamic(() => import('../components/Reviews'));\nconst BrevoForm = dynamic(() => import('../components/BrevoForm'), { ssr: false });\nconst GetYourGuideWidget = dynamic(() => import('../components/GetYourGuideWidget'), { ssr: false });\n\ntype MinimalPost = Pick<Post, 'slug' | 'title' | 'date' | 'summary' | 'language' | 'originalSlug'>\n\nconst App = ({ allPosts }: { allPosts: MinimalPost[] }) => {\n  const { t } = useTranslation();\n  const faqJsonLd = {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"FAQPage\",\n    \"mainEntity\": [\n      {\n        \"@type\": \"Question\",\n        \"name\": t('faq.tavernas.question', 'Where can I find authentic Greek tavernas in Athens?'),\n        \"acceptedAnswer\": {\n          \"@type\": \"Answer\",\n          \"text\": t('faq.tavernas.answer', \"Browse our Greek tavernas list for traditional spots favored by locals — curated maps and real reviews help you find the best spots.\")\n        }\n      },\n      {\n        \"@type\": \"Question\",\n        \"name\": t('faq.family.question', 'Are there family-friendly spots near the center of Athens?'),\n        \"acceptedAnswer\": {\n          \"@type\": \"Answer\",\n          \"text\": t('faq.family.answer', 'Yes — use the Kid Friendly category to find stroller-accessible venues, kid menus, and casual family-friendly restaurants.')\n        }\n      }\n    ]\n  } as const;\n  \n  return (\n    <div className=\"bg-white\">\n      <Head>\n        <title>{t('meta.homeTitle')}</title>\n        <meta\n          name=\"description\"\n          content={metaDescriptions.home}\n        />\n        <link rel=\"canonical\" href=\"https://googlementor.com\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <meta property=\"og:title\" content={t('meta.homeTitle')} />\n        <meta property=\"og:description\" content={t('meta.homeDescriptionShort')} />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:url\" content=\"https://googlementor.com\" />\n        <meta property=\"og:image\" content=\"https://googlementor.com/assets/images/cover-627.webp\" />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <link\n          rel=\"preload\"\n          as=\"image\"\n          href=\"/assets/images/cover-627.webp\"\n          type=\"image/webp\"\n          imageSrcSet=\"/assets/images/cover-480.webp 480w, /assets/images/cover-627.webp 627w\"\n          imageSizes=\"100vw\"\n        />\n        {/* FAQPage JSON-LD for common quick questions on the homepage (localized) */}\n        <script\n          type=\"application/ld+json\"\n          dangerouslySetInnerHTML={{ __html: JSON.stringify(faqJsonLd) }}\n        />\n      </Head>\n\n      {/* Hero Section */}\n      <section className=\"relative\">\n        <MainHero />\n      </section>\n\n      {/* Make Blog more prominent: place BlogHighlight higher on the page */}\n      {/* Blog highlight inserted here (minimal posts passed) */}\n      <BlogHighlight allPosts={allPosts} />\n\n      {/* Short AI-friendly intro for the homepage */}\n      <section className=\"bg-white py-8\">\n        <div className=\"max-w-4xl mx-auto px-4 text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">{t('home.intro.question', 'Looking for the best places to eat and explore in Greece?')}</h2>\n          <p className=\"text-gray-600 leading-relaxed\">{t('home.intro.answer', 'These curated maps and local picks highlight authentic tavernas, family-friendly spots and hidden gems, perfect for travelers and locals alike.')}</p>\n        </div>\n      </section>\n\n      {/* Tours & Activities Section */}\n      <LazyShow rootMargin=\"250px\">\n      <section className=\"py-16 lg:py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Section Header */}\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight\">\n              <span className=\"bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent\">\n                {t('navigation.getyourguide', 'Top Tours & Activities')}\n              </span>\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed\">\n              {t('getyourguide.subtitle', 'Discover the best experiences Greece has to offer with our curated selection of tours and activities')}\n            </p>\n            <div className=\"mt-6 mx-auto w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full\" />\n          </div>\n          \n          {/* Widget Container */}\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-white to-slate-50 rounded-3xl transform rotate-1\" />\n            <div className=\"relative bg-white rounded-3xl shadow-xl border border-gray-100 overflow-hidden\">\n              <GetYourGuideWidget />\n            </div>\n          </div>\n        </div>\n      </section>\n      </LazyShow>\n\n      {/* Islands/Destinations Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <section className=\"py-16 lg:py-20 bg-gradient-to-b from-gray-50 to-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Section Header */}\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight\">\n              <span className=\"bg-gradient-to-r from-emerald-600 via-teal-600 to-blue-600 bg-clip-text text-transparent\">\n                {t('islands.title', 'Greek Destinations')}\n              </span>\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed\">\n              {t('islands.subtitle', 'Explore the most beautiful islands and destinations across Greece')}\n            </p>\n            <div className=\"mt-6 mx-auto w-32 h-1 bg-gradient-to-r from-emerald-500 to-blue-500 rounded-full\" />\n          </div>\n          \n          <IslandList />\n        </div>\n      </section>\n      </LazyShow>\n\n      {/* Canvas Divider */}\n      <LazyShow deferRender rootMargin=\"200px\">\n        <div className=\"relative h-24\">\n          <Canvas />\n        </div>\n      </LazyShow>\n\n      {/* Reviews Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <Reviews />\n      </LazyShow>\n\n      {/* Product Showcase Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <section className=\"py-16 lg:py-20 bg-gradient-to-b from-white to-gray-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Section Header */}\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight\">\n              <span className=\"bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 bg-clip-text text-transparent\">\n                {t('productShowcaseTitle', 'Travel Essentials')}\n              </span>\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed\">\n              {t('productShowcase.subtitle', 'Carefully selected travel gear and essentials to enhance your Greek adventure')}\n            </p>\n            <div className=\"mt-6 mx-auto w-32 h-1 bg-gradient-to-r from-orange-500 to-pink-500 rounded-full\" />\n          </div>\n          \n          {/* Product Showcase Container */}\n          <div className=\"relative\">\n            <div className=\"absolute inset-0 bg-gradient-to-r from-white to-slate-50 rounded-3xl transform -rotate-1\" />\n            <div className=\"relative bg-white rounded-3xl shadow-xl border border-gray-100 p-8\">\n              <ProductShowcase />\n            </div>\n          </div>\n        </div>\n      </section>\n      </LazyShow>\n\n      {/* Canvas Divider */}\n      <LazyShow deferRender rootMargin=\"200px\">\n        <div className=\"relative h-24\">\n          <Canvas />\n        </div>\n      </LazyShow>\n\n      {/* Maps & Lists Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <section className=\"py-16 lg:py-20 bg-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          {/* Section Header */}\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 leading-tight\">\n              <span className=\"bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 bg-clip-text text-transparent\">\n                {t('product.title', 'Curated Maps & Lists')}\n              </span>\n            </h2>\n            <p className=\"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed\">\n              {t('product.subtitle', 'Discover Greece through our expertly curated collection of maps and location lists')}\n            </p>\n            <div className=\"mt-6 mx-auto w-32 h-1 bg-gradient-to-r from-green-500 to-teal-500 rounded-full\" />\n          </div>\n          \n          <Product />\n        </div>\n      </section>\n      </LazyShow>\n\n      {/* Canvas Divider */}\n      <LazyShow deferRender rootMargin=\"200px\">\n        <div className=\"relative h-24\">\n          <Canvas />\n        </div>\n      </LazyShow>\n\n      {/* About Us Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <AboutUs />\n      </LazyShow>\n\n      {/* FAQ Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <QASection />\n      </LazyShow>\n\n      {/* Newsletter Section */}\n      <LazyShow deferRender rootMargin=\"200px\">\n      <section className=\"py-16 lg:py-20 bg-gradient-to-r from-blue-600 to-purple-600\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl sm:text-4xl font-bold text-white mb-4\">\n              {t('newsletter.title', 'Stay Updated')}\n            </h2>\n            <p className=\"text-xl text-blue-100 max-w-2xl mx-auto\">\n              {t('newsletter.subtitle', 'Get the latest travel tips, new destinations, and exclusive offers delivered to your inbox')}\n            </p>\n          </div>\n          \n          <div className=\"bg-white/10 backdrop-blur-sm rounded-3xl p-8 border border-white/20\">\n            <BrevoForm />\n          </div>\n        </div>\n      </section>\n      </LazyShow>\n\n      {/* Final Section with lazy loading */}\n      <LazyShow>\n        <div className=\"relative h-24\">\n          <Canvas />\n        </div>\n      </LazyShow>\n    </div>\n  );\n};\n\nexport const getStaticProps: GetStaticProps = async () => {\n  const posts = getAllPosts()\n  // only send minimal fields to reduce page payload\n  const minimal = posts\n    .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\n    .map((p) => ({ slug: p.slug, title: p.title, date: p.date, summary: p.summary, language: p.language, originalSlug: p.originalSlug }))\n\n  return {\n    props: { allPosts: minimal },\n  };\n};\n\nexport default App;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  ","export const formatPostDate = (\r\n  date: string,\r\n  language: string,\r\n  options: Intl.DateTimeFormatOptions = { year: 'numeric', month: 'long', day: 'numeric' }\r\n) => {\r\n  const locale = language === 'el' ? 'el-GR' : 'en-US';\r\n  const parsedDate = new Date(date);\r\n\r\n  if (Number.isNaN(parsedDate.getTime())) {\r\n    return date;\r\n  }\r\n\r\n  return new Intl.DateTimeFormat(locale, {\r\n    ...options,\r\n    timeZone: 'UTC',\r\n  }).format(parsedDate);\r\n};\r\n"],"names":["metaDescriptions","home","search","store","blog","insurance","airalo","login","signup","terms","privacyPolicy","blogAthensAirportEn","blogAthensHopOnEn","blogAcropolisEn","blogLuxuryRooftopEn","blogPerfectIslandEn","blogHowToUseEn","blogPlanFunEn","blogAthensAirportEl","blogAthensHopOnEl","blogAcropolisEl","blogMeteora","blogMeteoraEl","blogLuxuryRooftopEl","blogPerfectIslandEl","blogHowToUseEl","blogPlanFunEl","blogGreece2026En","blogGreece2026El","blogWeatherSwimmingEn","blogWeatherSwimmingEl","blogAthensDayTripsEn","blogAthensDayTripsEl","blogBakeriesBrunchEn","blogBakeriesBrunchEl","generateBlogMetaDescription","title","summary","content","length","slice","trimEnd","firstParagraph","replace","find","p","trim","cleaned","children","LazyShow","deferRender","rootMargin","rootRef","useRef","onScreen","useOnScreen","isIntersecting","setIntersecting","useState","useEffect","window","observer","IntersectionObserver","entries","entry","currentRef","ref","current","observe","unobserve","hasShown","setHasShown","parsedRootMargin","Number","parseInt","placeholderMinHeight","isNaN","Math","max","fallbackTimer","setTimeout","clearTimeout","div","className","style","minHeight","aria-hidden","opacity","transform","transition","MyTicker","dynamic","ssr","InstallBanner","OfflineNotice","alignViewport","requestAnimationFrame","scrollTarget","matchMedia","matches","abs","scrollY","scrollTo","top","behavior","searchMode","logDevWarning","MainHero","args","shareSnackbar","setShareSnackbar","open","message","type","mainHero","config","t","useTranslation","isOnline","isStandalone","dataPreloadStatus","isInstallable","isInstalled","installApp","usePWA","categoryDataCacheRef","categoryDataUrls","desserts","italian","asian","burgers","vegetarian","mexican","attractions","normalizeRestaurantData","Array","isArray","data","filter","item","name","lat","parseFloat","lng","console","warn","map","url","address","loadRestaurantDataByCategory","category","categoryId","id","cached","localStorageKey","onLine","cachedData","localStorage","getItem","parsed","JSON","parse","e","dataUrl","response","fetch","ok","status","json","normalized","stringify","error","getDataByExperienceType","experienceType","categories","primary","includes","loadCurrentSourceData","selectedExperienceType","selectedType","selectedDisplayCategory","undefined","setSearchMode","setSelectedDisplayCategory","setSelectedExperienceType","setSelectedType","_userLocation","setUserLocation","nearestRestaurants","setNearestRestaurants","currentIndex","setCurrentIndex","loading","setLoading","setError","showRestaurantFinder","setShowRestaurantFinder","showMunicipalityList","setShowMunicipalityList","showCategorySelection","setShowCategorySelection","showLocationOptions","setShowLocationOptions","municipalitySearchQuery","setMunicipalitySearchQuery","searchRadius","setSearchRadius","maxResults","setMaxResults","selectedRestaurants","setSelectedRestaurants","Set","initialSearchDone","setInitialSearchDone","showDeferredUi","setShowDeferredUi","enableDeferredUi","idleWindow","requestIdleCallback","idleId","timeout","cancelIdleCallback","timeoutId","calculateDistance","lat1","lng1","lat2","lng2","dLat","PI","dLng","a","sin","cos","c","atan2","sqrt","findNearestPlaces","userLat","userLng","count","sourceData","restaurant","place","distance","sort","b","getUserLocation","effectiveCategory","selectedCategory","selectedMunicipality","cachedLocation","then","nearest","isMobile","innerWidth","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","setItem","geolocationError","enableHighAccuracy","maximumAge","searchByMunicipality","municipality","effectiveRadius","getDefaultSearchRadius","regionLower","region","toLowerCase","validPlaces","hasValidLat","hasValidLng","log","allPlacesWithDistance","initialRadius","placesWithinRadius","withinRadius","toFixed","limitedPlaces","categoryName","radius","location","results","timestamp","Date","now","resultsSection","document","getElementById","offset","offsetPosition","getBoundingClientRect","pageYOffset","selectSearchMode","runSearchWithCategory","prev","backToCategoryStep","fullReset","labelContainsDiningWord","label","tokens","some","token","currentRestaurant","normalizeSearchText","text","transliterateGreekToLatin","greekToLatin","result","greek","latin","Object","generateAlternativeSpellings","alternatives","working","english","greekVariations","forEach","variation","push","searchMatches","searchText","targetText","normalizedSearch","normalizedTarget","transliteratedTarget","transliteratedSearch","searchAlternatives","targetAlternatives","searchAlt","normalizedSearchAlt","targetAlt","normalizedTargetAlt","getMunicipalitiesData","municipalitiesData","filteredMunicipalities","query","name_en","aliases","alias","translatedName","region_en","translatedRegion","showAfterDelay","main","picture","source","srcSet","sizes","img","src","alt","decoding","objectFit","objectPosition","span","section","role","aria-label","header","onClick","tabIndex","onKeyDown","key","h1","h2","categoriesData","button","icon","h3","description","svg","fill","stroke","strokeWidth","viewBox","path","strokeLinecap","strokeLinejoin","d","input","value","onChange","target","placeholder","total","h4","reduce","acc","municipalities","min","step","getSafeCategoryHeading","raw","keywords","diningKeywords","k","has","getSafeCategoryForCount","size","selectAllVisible","newSet","limit","i","add","disabled","clearSelection","shareText","selectedItems","from","index","r","join","fullText","copied","shared","clipboard","writeText","share","aria-live","restaurantData","vegetarianData","luxuryDiningData","isVegan","v","isLuxury","l","isSelected","formatDistance","round","checked","toggleRestaurantSelection","delete","href","rel","process","fillRule","clipRule","secondaryAction","BlogHighlight","allPosts","i18n","resolvedLanguage","language","split","featured","deduped","values","post","originalSlug","slug","existing","date","getTime","Link","article","time","dateTime","formatPostDate","year","month","day","AboutUs","Canvas","Product","QASection","IslandList","ProductShowcase","Reviews","BrevoForm","GetYourGuideWidget","App","faqJsonLd","Head","meta","link","property","as","imageSrcSet","imageSizes","script","dangerouslySetInnerHTML","__html","options","parsedDate","Intl","DateTimeFormat","timeZone","format"],"sourceRoot":"","ignoreList":[]}